<!DOCTYPE html>
<html lang="es" class="scroll-smooth">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>La cuadra de Salvador - Men√∫ Digital</title>

  <!-- Tailwind CSS CDN -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Fuentes -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link
    href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600;700&family=Poppins:wght@300;400;500;600&display=swap"
    rel="stylesheet"
  />

  <style>
    body {
      font-family: "Poppins", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: radial-gradient(circle at top, #3b1f14 0, #0a0503 45%, #050304 100%);
      color: #f9fafb;
    }
    .font-steak {
      font-family: "Playfair Display", "Times New Roman", serif;
    }
    .bg-madera {
      background: #2b1b12;
    }
    .bg-carb {
      background: #121212;
    }

    .scrollbar-thin::-webkit-scrollbar {
      width: 6px;
    }
    .scrollbar-thin::-webkit-scrollbar-track {
      background: #111827;
    }
    .scrollbar-thin::-webkit-scrollbar-thumb {
      background: #4b5563;
      border-radius: 999px;
    }

    /* Chispas de carb√≥n / fuego flotantes */
    .spark-layer {
      position: fixed;
      inset: 0;
      pointer-events: none;
      z-index: -1;
      overflow: hidden;
    }
    .spark {
      position: absolute;
      width: 8px;
      height: 8px;
      border-radius: 999px;
      background: radial-gradient(circle, #fb923c, #b91c1c);
      opacity: 0.6;
      filter: blur(1px);
      animation: floatUp 14s linear infinite;
    }
    .spark:nth-child(2) { width: 10px; height: 10px; animation-duration: 18s; opacity: 0.45; }
    .spark:nth-child(3) { width: 6px; height: 6px; animation-duration: 16s; opacity: 0.7; }
    .spark:nth-child(4) { width: 9px; height: 9px; animation-duration: 20s; opacity: 0.5; }
    .spark:nth-child(5) { width: 5px; height: 5px; animation-duration: 13s; opacity: 0.8; }

    .spark-1 { left: 10%; bottom: -10%; animation-delay: 0s; }
    .spark-2 { left: 35%; bottom: -15%; animation-delay: -3s; }
    .spark-3 { left: 60%; bottom: -12%; animation-delay: -6s; }
    .spark-4 { left: 80%; bottom: -18%; animation-delay: -9s; }
    .spark-5 { left: 50%; bottom: -20%; animation-delay: -12s; }

    @keyframes floatUp {
      0% {
        transform: translateY(0) translateX(0);
        opacity: 0.7;
      }
      50% {
        transform: translateY(-60vh) translateX(10px);
        opacity: 0.95;
      }
      100% {
        transform: translateY(-120vh) translateX(-10px);
        opacity: 0;
      }
    }

    /* Modal imagen plato */
    #image-modal.hidden {
      display: none;
    }
  </style>
</head>
<body class="min-h-screen text-slate-100">

  <!-- CAPA DE CHISPAS -->
  <div class="spark-layer">
    <div class="spark spark-1"></div>
    <div class="spark spark-2"></div>
    <div class="spark spark-3"></div>
    <div class="spark spark-4"></div>
    <div class="spark spark-5"></div>
  </div>

  <!-- CONTENEDOR GENERAL -->
  <div class="min-h-screen flex flex-col">

    <!-- HEADER / HERO -->
    <header class="relative overflow-hidden border-b border-slate-800/60">
      <div class="absolute inset-0 opacity-45 pointer-events-none"
           style="background-image: url('fondo-parrilla.jpg'); background-size: cover; background-position: center;">
      </div>
      <div class="absolute inset-0 bg-gradient-to-br from-black via-black/85 to-amber-900/60"></div>

      <div class="relative max-w-6xl mx-auto px-4 py-6 flex items-center justify-between gap-4">
        <div class="max-w-xl flex items-center gap-4">
          <img src="logo-lena-carbon.png" alt="Le√±a y Carb√≥n" class="w-32 md:w-44 drop-shadow-2xl">
          <div>
            <p class="text-xs md:text-sm text-slate-100/90 mt-1">
              Donde el fuego manda y el sabor decide. Elige tus cortes, guarniciones y bebidas.
            </p>
          </div>
        </div>

        <!-- ICONO CARRITO -->
        <button id="cart-toggle"
                class="relative inline-flex items-center gap-2 rounded-full bg-gradient-to-r from-amber-500 to-red-500 hover:from-amber-400 hover:to-red-400 px-5 py-2.5 text-sm md:text-base font-semibold shadow-lg shadow-black/60 transition">
          <span>Ver pedido</span>
          <span id="cart-count"
                class="inline-flex items-center justify-center rounded-full bg-black/80 text-xs w-7 h-7 border border-amber-300/80">
            0
          </span>
        </button>
      </div>
    </header>

    <!-- SECCI√ìN HISTORIA / DUE√ëO -->
    <section class="max-w-6xl mx-auto px-4 pt-6 pb-4">
      <div class="grid md:grid-cols-3 gap-6 items-center">
        <div class="md:col-span-2 space-y-3">
          <h2 class="font-steak text-2xl md:text-3xl text-amber-200 drop-shadow">
            La historia de La cuadra de Salvador
          </h2>
          <p class="text-sm md:text-base text-slate-100/90">
            La cuadra de Salvador nace del sue√±o de convertir cada comida en una experiencia alrededor del fuego.
            Aqu√≠ la parrilla no es solo una forma de cocinar, es el centro de la reuni√≥n, de las risas y de las historias
            que se cuentan mientras el carb√≥n enciende el sabor.
          </p>
          <p class="text-sm md:text-base text-slate-200/90">
            Cada corte, cada guarnici√≥n y cada bebida han sido pensados para que disfrutes sin apuro: en familia,
            con amigos, celebrando algo grande o simplemente porque hoy se te antoj√≥ comer bien.
          </p>
        </div>

        <div class="md:col-span-1">
          <div class="bg-gradient-to-br from-amber-900/70 via-madera to-black/80 border border-amber-500/70 rounded-2xl p-4 flex flex-col items-center text-center shadow-2xl shadow-black/70">
            <div class="w-24 h-24 rounded-full overflow-hidden border-2 border-amber-300 mb-3">
              <!-- Cambia esta foto por la del due√±o real -->
              <img src="foto-dueno.jpg"
                   alt="Due√±o Le√±a y Carb√≥n" class="w-full h-full object-cover">
            </div>
            <p class="text-[11px] uppercase tracking-[0.2em] text-amber-300 mb-1">Propietario</p>
            <h3 class="font-steak text-lg mb-1 text-slate-50">[Nombre del propietario]</h3>
            <p class="text-xs md:text-sm text-slate-200">
              Apasionado por el fuego, la carne y el servicio. Su misi√≥n: que cada mesa salga con el est√≥mago lleno
              y el coraz√≥n contento.
            </p>
          </div>
        </div>
      </div>
    </section>

    <!-- TABS DEL MEN√ö -->
    <section class="max-w-6xl mx-auto px-4 pt-2 pb-4">
      <div id="menu-tabs" class="flex gap-2 justify-center flex-wrap overflow-x-auto pb-2 scrollbar-thin"></div>
    </section>

    <!-- CONTENIDO PRINCIPAL DEL MEN√ö -->
    <main class="flex-1">
      <section id="menu" class="max-w-6xl mx-auto px-4 pb-8">
        <div id="menu-sections" class="space-y-10"></div>
      </section>

      <!-- JUEGO TIPO PACMAN -->
      <section class="max-w-6xl mx-auto px-4 pb-12">
        <h2 class="font-steak text-2xl md:text-3xl mb-2 text-amber-200">Juega mientras esperas tu pedido</h2>
        <p class="text-slate-200 text-sm md:text-base mb-4 max-w-2xl">
          Mu√©vete por el laberinto, recoge todos los puntos y no te quedes quieto. Ideal para matar el tiempo mientras llega tu parrillada.
        </p>
        <div class="bg-madera/95 border border-amber-800/80 rounded-2xl p-4 flex flex-col lg:flex-row gap-6 items-center shadow-2xl shadow-black/80">
          <canvas id="pacman-canvas" width="540" height="360" class="bg-black rounded-xl border border-amber-600/70 shadow-inner shadow-black/80"></canvas>
          <div class="flex flex-col gap-4 items-center w-full lg:w-52">
            <div class="grid grid-cols-3 gap-2">
              <div></div>
              <button id="btn-up" class="px-4 py-2 rounded-full bg-slate-900/90 border border-slate-600 text-xs md:text-sm font-semibold hover:bg-slate-800">
                ‚ñ≤
              </button>
              <div></div>
              <button id="btn-left" class="px-4 py-2 rounded-full bg-slate-900/90 border border-slate-600 text-xs md:text-sm font-semibold hover:bg-slate-800">
                ‚óÄ
              </button>
              <div></div>
              <button id="btn-right" class="px-4 py-2 rounded-full bg-slate-900/90 border border-slate-600 text-xs md:text-sm font-semibold hover:bg-slate-800">
                ‚ñ∂
              </button>
              <div></div>
              <button id="btn-down" class="px-4 py-2 rounded-full bg-slate-900/90 border border-slate-600 text-xs md:text-sm font-semibold hover:bg-slate-800">
                ‚ñº
              </button>
              <div></div>
            </div>
            <button id="btn-restart" class="px-6 py-2 rounded-full bg-gradient-to-r from-amber-500 to-red-500 text-xs md:text-sm font-semibold hover:from-amber-400 hover:to-red-400">
              Reiniciar juego
            </button>
            <p id="pacman-msg" class="text-[11px] md:text-xs text-amber-100 text-center"></p>
          </div>
        </div>
      </section>
    </main>
  </div>

  <!-- CARRITO LATERAL -->
  <aside id="cart-panel"
         class="fixed inset-y-0 right-0 w-full max-w-md bg-carb border-l border-slate-800 shadow-2xl shadow-black/70 transform translate-x-full transition-transform duration-300 z-40 flex flex-col">
    <div class="flex items-center justify-between px-4 py-4 border-b border-slate-800/80">
      <h2 class="font-steak text-xl md:text-2xl">Tu pedido</h2>
      <button id="cart-close" class="text-sm md:text-base text-slate-300 hover:text-white">Cerrar ‚úï</button>
    </div>

    <div class="flex-1 overflow-y-auto px-4 py-3 space-y-3 scrollbar-thin" id="cart-items">
      <!-- Items del carrito -->
    </div>

    <div class="border-t border-slate-800/80 px-4 py-3 space-y-3 bg-black/50">
      <!-- Tipo de servicio -->
      <div>
        <p class="text-xs md:text-sm font-semibold text-slate-200 mb-1">¬øC√≥mo deseas tu pedido?</p>
        <div class="space-y-1 text-xs md:text-sm">
          <label class="inline-flex items-center gap-2">
            <input type="radio" name="servicio" value="mesa" class="accent-amber-500" checked />
            <span>Para servirse en la mesa</span>
          </label>
          <label class="inline-flex items-center gap-2 block">
            <input type="radio" name="servicio" value="domicilio" class="accent-amber-500" />
            <span>Env√≠o a domicilio</span>
          </label>
        </div>
      </div>

      <!-- Datos del cliente -->
      <div class="space-y-2">
        <p class="text-xs md:text-sm font-semibold text-slate-200">Datos del cliente</p>

        <div>
          <label for="cliente-nombre" class="block text-[11px] md:text-xs text-slate-300 mb-1">Nombre del cliente *</label>
          <input
            id="cliente-nombre"
            type="text"
            class="w-full bg-carb border border-slate-700 rounded-lg px-2 py-2 text-xs md:text-sm focus:outline-none focus:ring focus:ring-amber-500/50"
            placeholder="Ej: Cristian Lombeida" />
        </div>

        <div class="space-y-1">
          <label for="cliente-detalle" class="block text-[11px] md:text-xs text-slate-300">
            N√∫mero de mesa o direcci√≥n de entrega *
          </label>
          <textarea
            id="cliente-detalle"
            rows="2"
            class="w-full bg-carb border border-slate-700 rounded-lg px-2 py-2 text-xs md:text-sm focus:outline-none focus:ring focus:ring-amber-500/50"
            placeholder="Ej: Mesa 4 / Barrio X, calle Y, cerca de..."></textarea>
          <button
            id="btn-ubicacion"
            class="mt-1 inline-flex items-center gap-1 rounded-full bg-emerald-600 hover:bg-emerald-500 px-3 py-1.5 text-[11px] md:text-xs font-semibold">
            üìç Usar mi ubicaci√≥n actual
          </button>
          <p class="text-[10px] text-slate-400">
            Se abrir√° tu mapa para que confirmes la ubicaci√≥n y se agregar√° al pedido.
          </p>
        </div>
      </div>

      <!-- Forma de pago -->
      <div class="space-y-2">
        <p class="text-xs md:text-sm font-semibold text-slate-200 mb-1">Forma de pago *</p>
        <div class="space-y-1 text-xs md:text-sm">
          <label class="inline-flex items-center gap-2">
            <input type="radio" name="pago" value="efectivo" class="accent-amber-500" />
            <span>Efectivo</span>
          </label>
          <label class="inline-flex items-center gap-2 block">
            <input type="radio" name="pago" value="transferencia" class="accent-amber-500" />
            <span>Transferencia bancaria</span>
          </label>
        </div>

        <!-- Info bancaria (solo informativa) -->
        <div class="mt-1 border border-amber-700/70 bg-amber-900/20 rounded-lg px-3 py-2 text-[10px] md:text-xs text-amber-100 leading-snug">
          <p class="font-semibold mb-1">Datos para transferencia (ejemplo):</p>
          <p>Banco: ___________________________</p>
          <p>Tipo de cuenta: Ahorros / Corriente</p>
          <p>N√∫mero de cuenta: ________________</p>
          <p>Titular: ___________________________</p>
          <p class="mt-1 italic">* Env√≠a el comprobante por WhatsApp al confirmar el pedido.</p>
        </div>
      </div>

      <!-- Datos para factura (opcionales) -->
      <div class="space-y-2">
        <p class="text-xs md:text-sm font-semibold text-slate-200 mb-1">Datos para factura (opcional)</p>
        <div class="grid grid-cols-1 gap-2">
          <input
            id="factura-nombre"
            type="text"
            class="w-full bg-carb border border-slate-700 rounded-lg px-2 py-2 text-xs md:text-sm focus:outline-none focus:ring focus:ring-amber-500/50"
            placeholder="Nombre / Raz√≥n social" />
          <input
            id="factura-id"
            type="text"
            class="w-full bg-carb border border-slate-700 rounded-lg px-2 py-2 text-xs md:text-sm focus:outline-none focus:ring focus:ring-amber-500/50"
            placeholder="C√©dula / RUC" />
          <input
            id="factura-email"
            type="email"
            class="w-full bg-carb border border-slate-700 rounded-lg px-2 py-2 text-xs md:text-sm focus:outline-none focus:ring focus:ring-amber-500/50"
            placeholder="Correo electr√≥nico" />
        </div>
      </div>

      <!-- Total -->
      <div class="flex items-center justify-between text-sm md:text-base pt-1">
        <span class="text-slate-300">Total aproximado:</span>
        <span id="cart-total" class="text-amber-300 font-semibold">$0.00</span>
      </div>

      <!-- Bot√≥n WhatsApp -->
      <button id="whatsapp-btn"
              class="w-full inline-flex justify-center items-center gap-2 rounded-full bg-gradient-to-r from-emerald-500 to-emerald-400 hover:from-emerald-400 hover:to-emerald-300 px-4 py-2.5 text-sm md:text-base font-semibold transition shadow-lg shadow-black/60">
        Confirmar pedido por WhatsApp
      </button>

      <p class="text-[10px] md:text-xs text-slate-400">
        * El precio final puede variar ligeramente seg√∫n disponibilidad y cambios en el d√≠a.
      </p>
    </div>
  </aside>

  <!-- OVERLAY DEL CARRITO -->
  <div id="cart-overlay"
       class="fixed inset-0 bg-black/60 backdrop-blur-sm z-30 opacity-0 pointer-events-none transition-opacity duration-300"></div>

  <!-- MODAL CONFIRMACI√ìN AGREGAR AL CARRITO -->
  <div id="add-modal" class="fixed inset-0 z-50 hidden">
    <div id="add-modal-backdrop" class="absolute inset-0 bg-black/70"></div>
    <div class="relative w-full h-full flex items-center justify-center px-4">
      <div class="max-w-sm w-full bg-carb border border-amber-600/70 rounded-2xl p-4 shadow-2xl shadow-black/80">
        <h3 class="font-steak text-lg md:text-xl text-amber-100 mb-2">Agregar al pedido</h3>
        <p id="add-modal-name" class="text-sm md:text-base text-slate-100 font-semibold"></p>
        <p id="add-modal-extras" class="text-[11px] md:text-xs text-slate-300 mt-1 mb-3"></p>

        <div class="flex items-center justify-between mb-3">
          <span class="text-sm text-slate-200">Cantidad</span>
          <div class="inline-flex items-center gap-2">
            <button id="add-modal-minus"
                    class="w-8 h-8 rounded-full border border-slate-600 bg-slate-900 text-slate-100 text-lg leading-none flex items-center justify-center">
              -
            </button>
            <span id="add-modal-qty" class="w-8 text-center text-sm md:text-base text-amber-200 font-semibold">
              1
            </span>
            <button id="add-modal-plus"
                    class="w-8 h-8 rounded-full border border-amber-500 bg-amber-600 text-black text-lg leading-none flex items-center justify-center">
              +
            </button>
          </div>
        </div>

        <div class="flex items-center justify-between mb-4">
          <span class="text-sm text-slate-200">Total de este plato</span>
          <span id="add-modal-total" class="text-amber-300 font-semibold text-base">
            $0.00
          </span>
        </div>

        <div class="flex gap-2 justify-end">
          <button id="add-modal-cancel"
                  class="px-3 py-1.5 rounded-full border border-slate-600 text-xs md:text-sm text-slate-200 hover:bg-slate-800">
            Cancelar
          </button>
          <button id="add-modal-confirm"
                  class="px-4 py-1.5 rounded-full bg-gradient-to-r from-amber-500 to-red-500 text-xs md:text-sm font-semibold hover:from-amber-400 hover:to-red-400">
            Confirmar
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- MODAL DE IMAGEN DE PLATO -->
  <div id="image-modal" class="fixed inset-0 z-50 hidden">
    <div id="image-modal-backdrop" class="absolute inset-0 bg-black/80"></div>
    <div class="relative w-full h-full flex items-center justify-center px-4">
      <div class="relative max-w-xl w-full bg-black/90 border border-amber-600/60 rounded-2xl p-3 shadow-2xl shadow-black/80">
        <button id="image-modal-close"
                class="absolute -top-3 -right-3 w-8 h-8 rounded-full bg-red-600 text-white text-sm font-bold shadow-lg">
          ‚úï
        </button>
        <img id="image-modal-img" src="" alt="Plato" class="w-full h-full max-h-[70vh] object-contain rounded-xl" />
      </div>
    </div>
  </div>

  <!-- SCRIPT -->
  <script>
    const cart = [];

    const cartToggleBtn = document.getElementById("cart-toggle");
    const cartPanel = document.getElementById("cart-panel");
    const cartOverlay = document.getElementById("cart-overlay");
    const cartCloseBtn = document.getElementById("cart-close");
    const cartItemsContainer = document.getElementById("cart-items");
    const cartTotalEl = document.getElementById("cart-total");
    const cartCountEl = document.getElementById("cart-count");
    const whatsappBtn = document.getElementById("whatsapp-btn");
    const detalleClienteEl = document.getElementById("cliente-detalle");
    const btnUbicacion = document.getElementById("btn-ubicacion");

    // Modal agregar
    const addModal = document.getElementById("add-modal");
    const addModalBackdrop = document.getElementById("add-modal-backdrop");
    const addModalNameEl = document.getElementById("add-modal-name");
    const addModalExtrasEl = document.getElementById("add-modal-extras");
    const addModalQtyEl = document.getElementById("add-modal-qty");
    const addModalTotalEl = document.getElementById("add-modal-total");
    const addModalMinusBtn = document.getElementById("add-modal-minus");
    const addModalPlusBtn = document.getElementById("add-modal-plus");
    const addModalCancelBtn = document.getElementById("add-modal-cancel");
    const addModalConfirmBtn = document.getElementById("add-modal-confirm");

    let pendingItem = null;
    let pendingQty = 1;

    // TABS
    const tabs = [
      { id: "carnes", label: "Carnes & Parrilladas" },
      { id: "entradas", label: "Entradas & Ni√±os" },
      { id: "desayunos", label: "Desayunos" },
      { id: "bebidas-frias", label: "Bebidas fr√≠as" },
      { id: "cocteles", label: "Cocteles & Tragos" },
      { id: "jugos", label: "Jugos & Gaseosas" }
    ];

    // Map de secciones -> pesta√±a
    const sectionToTab = {
      "cortes-angus": "carnes",
      "parrilladas": "carnes",
      "espada": "carnes",
      "alitas": "carnes",
      "lomitos": "carnes",
      "ubre": "carnes",
      "mariscos": "carnes",
      "carnes-cerdo": "carnes",
      "costillas-barril": "carnes",
      "costillas-texas": "carnes",
      "arroz-moro": "carnes",

      "entradas-fastfood": "entradas",
      "ninos": "entradas",

      "desayunos": "desayunos",

      "bebidas-batidos": "bebidas-frias",

      "bebidas-cocteles": "cocteles",

      "gaseosas-cervezas": "jugos",
      "jugos-naturales": "jugos"
    };

    // Secciones del men√∫ (config visual)
    const menuSections = [
      {
        id: "cortes-angus",
        title: "Cortes Premium Angus Americana",
        description: "Cortes Angus importados, con el sello de la parrilla al carb√≥n. Incluyen papas, pi√±a asada, ensalada, chimichurri y salsa.",
        image: "https://images.unsplash.com/photo-1553163147-622ab57be1c7?auto=format&fit=crop&w=1200&q=80"
      },
      {
        id: "parrilladas",
        title: "Parrilladas",
        description: "Parrilladas personales o para compartir, con carnes mixtas y acompa√±antes.",
        image: "https://images.unsplash.com/photo-1529193586396-0f02186e1120?auto=format&fit=crop&w=1200&q=80"
      },
      {
        id: "espada",
        title: "Especial a la espada",
        description: "Selecci√≥n de cortes premium servidos a la espada.",
        image: "https://images.unsplash.com/photo-1544025162-d76694265947?auto=format&fit=crop&w=1200&q=80"
      },
      {
        id: "alitas",
        title: "Alitas",
        description: "Alitas ba√±adas en tu salsa favorita, con papas y ensalada.",
        image: "https://images.unsplash.com/photo-1608038509085-9b0c5a59c3b8?auto=format&fit=crop&w=1200&q=80"
      },
      {
        id: "lomitos",
        title: "Lomitos",
        description: "Lomitos de carne y pollo con papas, ensalada y salsas.",
        image: "https://images.unsplash.com/photo-1569058242567-94d6919aaf13?auto=format&fit=crop&w=1200&q=80"
      },
      {
        id: "ubre",
        title: "Ubre Asada",
        description: "Ubre asada al carb√≥n con acompa√±antes.",
        image: "https://images.unsplash.com/photo-1514933651103-005eec06c04b?auto=format&fit=crop&w=1200&q=80"
      },
      {
        id: "mariscos",
        title: "Mariscos",
        description: "Sabores del mar a la parrilla.",
        image: "https://images.unsplash.com/photo-1466637574441-749b8f19452f?auto=format&fit=crop&w=1200&q=80"
      },
      {
        id: "carnes-cerdo",
        title: "Carnes de Cerdo",
        description: "Mata hambres y pancetas con el toque ahumado de la casa.",
        image: "https://images.unsplash.com/photo-1608038509085-9b0c5a59c3b8?auto=format&fit=crop&w=1200&q=80"
      },
      {
        id: "costillas-barril",
        title: "Costillas de Cerdo al Barril",
        description: "Costillas al barril con diferentes acompa√±antes.",
        image: "https://images.unsplash.com/photo-1505576399279-565b52d4ac71?auto=format&fit=crop&w=1200&q=80"
      },
      {
        id: "arroz-moro",
        title: "Arroz Moro",
        description: "Arroz moro con diferentes prote√≠nas.",
        image: "https://images.unsplash.com/photo-1546069901-d5bfd2cbfb1f?auto=format&fit=crop&w=1200&q=80"
      },
      {
        id: "entradas-fastfood",
        title: "Entradas & Fast Food",
        description: "Para picar, compartir o acompa√±ar tus platos fuertes.",
        image: "https://images.unsplash.com/photo-1513104890138-7c749659a591?auto=format&fit=crop&w=1200&q=80"
      },
      {
        id: "ninos",
        title: "Men√∫ para Ni√±os",
        description: "Opciones pensadas para los m√°s peque√±os.",
        image: "https://images.unsplash.com/photo-1604908176997-1251884b08a6?auto=format&fit=crop&w=1200&q=80"
      },
      {
        id: "desayunos",
        title: "Desayunos (7:00 am - 2:00 pm)",
        description: "Desayunos t√≠picos para empezar el d√≠a con energ√≠a.",
        image: "https://images.unsplash.com/photo-1525351484163-7529414344d8?auto=format&fit=crop&w=1200&q=80"
      },
      {
        id: "bebidas-batidos",
        title: "Batidos, Granizados, Helados y Frapp√©s",
        description: "Bebidas fr√≠as, helados y frapp√©s para refrescar tu visita.",
        image: "https://images.unsplash.com/photo-1481391032119-d89fee407e44?auto=format&fit=crop&w=1200&q=80"
      },
      {
        id: "bebidas-cocteles",
        title: "Cocteles & Tragos",
        description: "Cocteles cl√°sicos y sangr√≠as.",
        image: "https://images.unsplash.com/photo-1601924582971-dbee1a7a0d95?auto=format&fit=crop&w=1200&q=80"
      },
      {
        id: "gaseosas-cervezas",
        title: "Gaseosas, Aguas & Cervezas",
        description: "Bebidas embotelladas y cervezas.",
        image: "https://images.unsplash.com/photo-1544070078-a212eda27b43?auto=format&fit=crop&w=1200&q=80"
      },
      {
        id: "jugos-naturales",
        title: "Jugos Naturales (Jarras)",
        description: "Jarras de jugo natural en diferentes sabores y tama√±os.",
        image: "https://images.unsplash.com/photo-1577803645773-f96470509666?auto=format&fit=crop&w=1200&q=80"
      },
      {
        id: "costillas-texas",
        title: "Costillas Ahumadas Texas (Fin de semana)",
        description: "Costillas ahumadas estilo americano, disponibles fines de semana.",
        image: "https://images.unsplash.com/photo-1530373239216-42518e6b4064?auto=format&fit=crop&w=1200&q=80"
      }
    ];

    // √çtems del men√∫
    const menuItems = [
      // CORTES ANGUS
      {
        section: "cortes-angus",
        name: "Pica√±a Angus 320gr",
        price: 17.00,
        desc: "Pica√±a Angus 320gr, papas fritas o papa salteada, pi√±a asada, ensalada, chimichurri y salsa.",
        withSides: true,
        withPunto: true
      },
      {
        section: "cortes-angus",
        name: "Lomo Fino 400gr",
        price: 15.00,
        desc: "Lomo fino 400gr, papas fritas o papa salteada, pi√±a asada, ensalada, chimichurri y salsa.",
        withSides: true,
        withPunto: true
      },
      {
        section: "cortes-angus",
        name: "1/2 Lomo Fino 225gr",
        price: 10.00,
        desc: "Media porci√≥n de lomo fino, con papas, pi√±a asada y ensalada.",
        withSides: true,
        withPunto: true
      },
      {
        section: "cortes-angus",
        name: "Tomahawk Steak Angus 500gr",
        price: 20.00,
        desc: "Tomahawk Angus 500gr, papas, pi√±a asada, ensalada, chimichurri y salsa.",
        withSides: true,
        withPunto: true
      },
      {
        section: "cortes-angus",
        name: "Ribeye Angus 400gr",
        price: 16.00,
        desc: "Ribeye 400gr, corte marmoleado, papas, pi√±a asada, ensalada, chimichurri y salsa.",
        withSides: true,
        withPunto: true
      },
      {
        section: "cortes-angus",
        name: "T-Bone Angus 350gr",
        price: 16.00,
        desc: "T-Bone 350gr, lomo y filete en un mismo hueso, con acompa√±antes.",
        withSides: true,
        withPunto: true
      },
      {
        section: "cortes-angus",
        name: "New York Steak Angus 400gr",
        price: 17.00,
        desc: "New York 400gr, corte firme y jugoso, con papas, pi√±a asada y ensalada.",
        withSides: true,
        withPunto: true
      },

      // PARRILLADAS
      {
        section: "parrilladas",
        name: "Parrillada Personal",
        price: 12.00,
        desc: "Lomo de res, chuleta, pechuga, chorizo, papas fritas o papa salteada o patacones, pi√±a asada, ensalada, chimichurri y salsa.",
        withSides: true
      },
      {
        section: "parrilladas",
        name: "Parrillada para Dos",
        price: 25.00,
        desc: "Parrillada mixta para compartir: lomo de res, chuleta, pechuga, chorizo, papas, pi√±a asada, ensalada, chimichurri y salsa.",
        withSides: true
      },

      // ESPADA
      {
        section: "espada",
        name: "Lomo Fino + Pica√±a + Ribeye 850gr (a la espada)",
        price: 40.00,
        desc: "Selecci√≥n de cortes premium a la espada, con papas, pi√±a asada, ensalada, chimichurri y salsa.",
        withSides: true,
        withPunto: true
      },

      // ALITAS
      {
        section: "alitas",
        name: "Alitas x6 (BBQ / Maracuy√° / Miel Mostaza)",
        price: 6.00,
        desc: "Alitas a tu salsa favorita, con papas fritas, ensalada y salsas.",
        withSides: false
      },

      // LOMITOS
      {
        section: "lomitos",
        name: "Lomito de carne y pollo",
        price: 5.00,
        desc: "Lomito mixto de carne y pollo, papas fritas, ensalada y salsas.",
        withSides: false
      },

      // UBRE
      {
        section: "ubre",
        name: "Ubre Asada",
        price: 7.00,
        desc: "Ubre asada al carb√≥n, con papas fritas, papa salteada o patacones, ensalada y salsas.",
        withSides: true
      },

      // MARISCOS
      {
        section: "mariscos",
        name: "Camar√≥n Reventado",
        price: 8.00,
        desc: "Camarones apanados, con papas fritas o patacones, ensalada, chimichurri y salsa.",
        withSides: true
      },

      // CARNES DE CERDO
      {
        section: "carnes-cerdo",
        name: "Mata Hambre al Lim√≥n",
        price: 10.00,
        desc: "Carne de cerdo al lim√≥n, con papas, papa salteada o patacones, pi√±a caramelizada, ensalada, chimichurri y salsa.",
        withSides: true
      },
      {
        section: "carnes-cerdo",
        name: "Mata Hambre a la Pizza",
        price: 15.00,
        desc: "Carne de cerdo cubierta con queso y estilo pizza, con papas, pi√±a caramelizada, ensalada y salsas.",
        withSides: true
      },
      {
        section: "carnes-cerdo",
        name: "Panceta Reventada",
        price: 10.00,
        desc: "Panceta 400gr, guacamole, papas, papa salteada o patacones, pi√±a caramelizada, ensalada, chimichurri y salsa.",
        withSides: true
      },
      {
        section: "carnes-cerdo",
        name: "Panceta Reventada + Costilla",
        price: 15.00,
        desc: "Panceta 400gr + costilla, guacamole, papas, papa salteada o patacones, pi√±a caramelizada, ensalada, chimichurri y salsa.",
        withSides: true
      },

      // COSTILLAS AL BARRIL
      {
        section: "costillas-barril",
        name: "Costilla Personal + Chorizo Paisa",
        price: 6.00,
        desc: "Costilla de cerdo al barril, chorizo paisa, papas o patacones, pi√±a caramelizada, ensalada y salsa.",
        withSides: true
      },
      {
        section: "costillas-barril",
        name: "Costilla Personal + Arroz blanco y menestra",
        price: 6.50,
        desc: "Costilla, chorizo, arroz blanco, menestra, papas, pi√±a caramelizada, ensalada y salsa.",
        withSides: false
      },
      {
        section: "costillas-barril",
        name: "Costilla Personal BBQ Americano",
        price: 7.50,
        desc: "Costilla con salsa BBQ americana, chorizo, papas, pi√±a caramelizada, ensalada y salsa.",
        withSides: true
      },
      {
        section: "costillas-barril",
        name: "Costilla Personal + Arroz Moro",
        price: 8.50,
        desc: "Costilla, chorizo, arroz moro, papas o patacones, pi√±a caramelizada, ensalada, chimichurri y salsa.",
        withSides: true
      },
      {
        section: "costillas-barril",
        name: "Costilla Personal + MoroChoclo",
        price: 9.50,
        desc: "Costilla, chorizo, arroz moro con choclo, papas o patacones, pi√±a caramelizada, ensalada, chimichurri y salsa.",
        withSides: true
      },

      // ARROZ MORO
      { section: "arroz-moro", name: "Arroz Moro con Lomo de Res", price: 7.00, desc: "Arroz moro con lomo de res.", withSides: false },
      { section: "arroz-moro", name: "Arroz Moro con Chuleta", price: 7.00, desc: "Arroz moro con chuleta.", withSides: false },
      { section: "arroz-moro", name: "Arroz Moro con Costillar de Res", price: 7.00, desc: "Arroz moro con costillar de res.", withSides: false },
      { section: "arroz-moro", name: "Arroz Moro con Costillar de Cerdo", price: 7.00, desc: "Arroz moro con costillar de cerdo.", withSides: false },
      { section: "arroz-moro", name: "Arroz Moro con Costilla Ahumada", price: 7.00, desc: "Arroz moro con costilla ahumada.", withSides: false },
      { section: "arroz-moro", name: "Arroz Moro con Pechuga a la Plancha", price: 7.00, desc: "Arroz moro con pechuga a la plancha.", withSides: false },

      // ENTRADAS & FAST FOOD
      {
        section: "entradas-fastfood",
        name: "Chistorra a la parrilla",
        price: 6.00,
        desc: "Chistorra dorada al carb√≥n, ideal para compartir.",
        withSides: false
      },
      {
        section: "entradas-fastfood",
        name: "Patacones con queso",
        price: 3.50,
        desc: "Patacones con queso fundido.",
        withSides: false
      },
      {
        section: "entradas-fastfood",
        name: "Papas fritas + salsas",
        price: 2.50,
        desc: "Papas fritas con salsas de la casa.",
        withSides: false
      },
      {
        section: "entradas-fastfood",
        name: "Hamburguesa normal",
        price: 4.50,
        desc: "Carne de res 200g, queso cheddar, tocino, cebolla caramelizada, vegetales, papas fritas y salsas.",
        withSides: false
      },
      {
        section: "entradas-fastfood",
        name: "Hamburguesa de casa",
        price: 6.00,
        desc: "Hamburguesa especial con mozzarela, cheddar, tocino, chorizo paisa, pi√±a asada, vegetales y papas fritas.",
        withSides: false
      },
      {
        section: "entradas-fastfood",
        name: "Salchipapa",
        price: 3.50,
        desc: "Papas fritas con salchicha y salsas.",
        withSides: false
      },

      // MEN√ö NI√ëOS
      {
        section: "ninos",
        name: "Nuggets + Pulp + Nucita",
        price: 6.00,
        desc: "Nuggets con papas fritas o patacones, salsas, bebida Pulp y Nucita.",
        withSides: false
      },
      {
        section: "ninos",
        name: "Nuggets + Salchicha + Pulp + Nucita",
        price: 7.00,
        desc: "Nuggets y salchicha con papas fritas o patacones, salsas, Pulp y Nucita.",
        withSides: false
      },

      // DESAYUNOS
      { section: "desayunos", name: "Bol√≥n de queso", price: 3.00, desc: "Bol√≥n de verde con queso.", withSides: false },
      { section: "desayunos", name: "Bol√≥n de chicharr√≥n", price: 3.50, desc: "Bol√≥n de verde con chicharr√≥n.", withSides: false },
      { section: "desayunos", name: "Bol√≥n mixto", price: 4.00, desc: "Bol√≥n de verde con queso y chicharr√≥n.", withSides: false },
      { section: "desayunos", name: "Bol√≥n mixto especial", price: 6.50, desc: "Bol√≥n con extra de ingredientes de la casa.", withSides: false },
      { section: "desayunos", name: "Bol√≥n de camar√≥n", price: 5.00, desc: "Bol√≥n de verde relleno de camar√≥n.", withSides: false },
      { section: "desayunos", name: "Tigrillo", price: 3.75, desc: "Tigrillo tradicional.", withSides: false },
      { section: "desayunos", name: "Mote pillo", price: 3.00, desc: "Mote pillo suave y cremoso.", withSides: false },
      { section: "desayunos", name: "Patacones con seco de carne", price: 3.00, desc: "Patacones con seco de carne.", withSides: false },
      { section: "desayunos", name: "Empanadas de viento + caf√©", price: 1.25, desc: "Empanada de viento acompa√±ada de caf√©.", withSides: false },
      { section: "desayunos", name: "Tortillas de yuca", price: 2.00, desc: "Tortillas de yuca doradas.", withSides: false },
      { section: "desayunos", name: "2 tortillas de verde", price: 3.00, desc: "Tortillas de verde.", withSides: false },
      { section: "desayunos", name: "Tortillas de trigo", price: 1.75, desc: "Tortillas de trigo tradicionales.", withSides: false },
      { section: "desayunos", name: "Encocado de pescado o camar√≥n", price: 6.00, desc: "Encocado t√≠pico de pescado o camar√≥n.", withSides: false },

      // BATIDOS, HELADOS, FRAPP√âS
      { section: "bebidas-batidos", name: "Batido de mora", price: 2.25, desc: "Batido de mora cremoso.", withSides: false },
      { section: "bebidas-batidos", name: "Batido de fresa", price: 2.25, desc: "Batido de fresa cremoso.", withSides: false },
      { section: "bebidas-batidos", name: "Batido de pi√±acoco", price: 2.75, desc: "Batido de pi√±a con coco.", withSides: false },
      { section: "bebidas-batidos", name: "Batido de fresapi√±a", price: 2.75, desc: "Batido de fresa y pi√±a.", withSides: false },
      { section: "bebidas-batidos", name: "Granizado de fresa", price: 2.25, desc: "Granizado de fresa.", withSides: false },
      { section: "bebidas-batidos", name: "Helado de copa normal", price: 1.75, desc: "Helado en copa tama√±o normal.", withSides: false },
      { section: "bebidas-batidos", name: "Helado de copa grande", price: 2.25, desc: "Helado en copa grande.", withSides: false },
      { section: "bebidas-batidos", name: "Frapp√© de Oreo", price: 3.00, desc: "Frapp√© sabor Oreo.", withSides: false },
      { section: "bebidas-batidos", name: "Frapp√© de capuchino", price: 3.50, desc: "Frapp√© sabor capuchino.", withSides: false },
      { section: "bebidas-batidos", name: "Frapp√© de mocca", price: 3.50, desc: "Frapp√© sabor mocca.", withSides: false },
      { section: "bebidas-batidos", name: "Frapp√© de avellana", price: 3.50, desc: "Frapp√© sabor avellana.", withSides: false },

      // COCTELES
      { section: "bebidas-cocteles", name: "Mojito", price: 6.00, desc: "Coctel cl√°sico con hierbabuena y lim√≥n.", withSides: false },
      { section: "bebidas-cocteles", name: "Daiquiri de fresa", price: 6.00, desc: "Coctel de fresa.", withSides: false },
      { section: "bebidas-cocteles", name: "Pi√±a colada", price: 6.00, desc: "Coctel cremoso de pi√±a y coco.", withSides: false },
      { section: "bebidas-cocteles", name: "Cuba libre", price: 6.00, desc: "Ron con cola y lim√≥n.", withSides: false },
      { section: "bebidas-cocteles", name: "Sangr√≠a peque√±a", price: 6.00, desc: "Sangr√≠a en jarra peque√±a.", withSides: false },
      { section: "bebidas-cocteles", name: "Sangr√≠a grande", price: 12.00, desc: "Sangr√≠a en jarra grande.", withSides: false },
      { section: "bebidas-cocteles", name: "Copa de vino", price: 3.00, desc: "Copa de vino tinto o blanco.", withSides: false },

      // GASEOSAS, AGUAS, CERVEZAS
      { section: "gaseosas-cervezas", name: "Cola personal", price: 0.75, desc: "Gaseosa personal.", withSides: false },
      { section: "gaseosas-cervezas", name: "Cola 1250ml", price: 1.75, desc: "Botella de cola 1.25L.", withSides: false },
      { section: "gaseosas-cervezas", name: "Cola 3L", price: 4.00, desc: "Botella de cola 3L.", withSides: false },
      { section: "gaseosas-cervezas", name: "Fuze Tea 1L", price: 1.75, desc: "T√© helado Fuze Tea 1L.", withSides: false },
      { section: "gaseosas-cervezas", name: "Malta peque√±a", price: 0.75, desc: "Malta personal.", withSides: false },
      { section: "gaseosas-cervezas", name: "Malta 1L", price: 1.00, desc: "Malta 1L.", withSides: false },
      { section: "gaseosas-cervezas", name: "Agua personal", price: 0.75, desc: "Agua embotellada.", withSides: false },
      { section: "gaseosas-cervezas", name: "Cerveza Club 550cc", price: 2.75, desc: "Cerveza Club 550cc.", withSides: false },
      { section: "gaseosas-cervezas", name: "Cerveza Corona 330cc", price: 2.50, desc: "Cerveza Corona 330cc.", withSides: false },
      { section: "gaseosas-cervezas", name: "Michelada lim√≥n (Light)", price: 3.50, desc: "Michelada de cerveza light con lim√≥n.", withSides: false },
      { section: "gaseosas-cervezas", name: "Michelada lim√≥n (Club)", price: 4.00, desc: "Michelada de cerveza Club con lim√≥n.", withSides: false },
      { section: "gaseosas-cervezas", name: "Michelada maracuy√° (Light)", price: 3.50, desc: "Michelada de cerveza light con maracuy√°.", withSides: false },
      { section: "gaseosas-cervezas", name: "Michelada maracuy√° (Club)", price: 4.00, desc: "Michelada de cerveza Club con maracuy√°.", withSides: false },
      { section: "gaseosas-cervezas", name: "Michelada maracumango (Light)", price: 3.50, desc: "Michelada de cerveza light con maracuy√° y mango.", withSides: false },
      { section: "gaseosas-cervezas", name: "Michelada maracumango (Club)", price: 4.00, desc: "Michelada de cerveza Club con maracuy√° y mango.", withSides: false },

      // JUGOS NATURALES (jarras)
      { section: "jugos-naturales", name: "Limonada peque√±a", price: 3.00, desc: "Jarra peque√±a de limonada.", withSides: false },
      { section: "jugos-naturales", name: "Limonada grande", price: 4.00, desc: "Jarra grande de limonada.", withSides: false },
      { section: "jugos-naturales", name: "Limonada extra", price: 6.00, desc: "Jarra extra grande de limonada.", withSides: false },
      { section: "jugos-naturales", name: "Limonada rosa peque√±a", price: 3.00, desc: "Jarra peque√±a de limonada rosa.", withSides: false },
      { section: "jugos-naturales", name: "Limonada rosa grande", price: 4.00, desc: "Jarra grande de limonada rosa.", withSides: false },
      { section: "jugos-naturales", name: "Limonada rosa extra", price: 6.00, desc: "Jarra extra de limonada rosa.", withSides: false },
      { section: "jugos-naturales", name: "Jamaica peque√±a (sin az√∫car)", price: 3.00, desc: "Jarra peque√±a de jamaica sin az√∫car.", withSides: false },
      { section: "jugos-naturales", name: "Jamaica grande (sin az√∫car)", price: 4.00, desc: "Jarra grande de jamaica sin az√∫car.", withSides: false },
      { section: "jugos-naturales", name: "Jamaica extra (sin az√∫car)", price: 6.00, desc: "Jarra extra de jamaica sin az√∫car.", withSides: false },
      { section: "jugos-naturales", name: "Jugo de fresa peque√±o", price: 3.00, desc: "Jarra peque√±a de jugo de fresa.", withSides: false },
      { section: "jugos-naturales", name: "Jugo de fresa grande", price: 4.00, desc: "Jarra grande de jugo de fresa.", withSides: false },
      { section: "jugos-naturales", name: "Jugo de fresa extra", price: 6.00, desc: "Jarra extra de jugo de fresa.", withSides: false },
      { section: "jugos-naturales", name: "Jugo de maracuy√° peque√±o", price: 3.00, desc: "Jarra peque√±a de jugo de maracuy√°.", withSides: false },
      { section: "jugos-naturales", name: "Jugo de maracuy√° grande", price: 4.00, desc: "Jarra grande de jugo de maracuy√°.", withSides: false },
      { section: "jugos-naturales", name: "Jugo de maracuy√° extra", price: 6.00, desc: "Jarra extra de jugo de maracuy√°.", withSides: false },

      // COSTILLAS TEXAS FIN DE SEMANA
      {
        section: "costillas-texas",
        name: "Costilla ahumada americana texana",
        price: 12.00,
        desc: "Costilla ahumada estilo Texas, chorizo, BBQ especial, pi√±a caramelizada, papas, ensalada, chimichurri y salsa.",
        withSides: true
      },
      {
        section: "costillas-texas",
        name: "Costilla ahumada americana texana + moro",
        price: 14.00,
        desc: "Costilla ahumada estilo Texas con arroz moro, chorizo, papas, pi√±a caramelizada, ensalada, chimichurri y salsa.",
        withSides: true
      }
    ];

    function buildTabs() {
      const tabsContainer = document.getElementById("menu-tabs");
      tabs.forEach(tab => {
        const btn = document.createElement("button");
        btn.className =
          "whitespace-nowrap rounded-full border px-4 py-2 text-xs md:text-sm font-semibold tracking-wide bg-black/50 border-slate-700 text-slate-100 hover:bg-amber-700/60 hover:border-amber-400 transition shadow-sm shadow-black/40";
        btn.textContent = tab.label;
        btn.dataset.tabId = tab.id;
        btn.addEventListener("click", () => setActiveTab(tab.id));
        tabsContainer.appendChild(btn);
      });
    }

    function createCard(item, sectionConfig) {
      const article = document.createElement("article");
      article.className = "bg-madera/95 border border-amber-800/70 rounded-2xl overflow-hidden shadow-xl shadow-black/60 flex flex-col max-w-md";
      article.setAttribute("data-name", item.name);
      article.setAttribute("data-price", item.price.toString());

      const puntoHtml = item.withPunto ? `
        <div>
          <label class="block text-xs md:text-sm text-slate-300 mb-1 font-medium">Punto de cocci√≥n (opcional)</label>
          <select class="w-full text-xs md:text-sm bg-carb border border-slate-700 rounded-lg px-2 py-2 focus:outline-none focus:ring focus:ring-amber-500/50 punto-select">
            <option value="">Sin preferencia</option>
            <option value="3/4">3/4 (jugoso)</option>
            <option value="Al punto">Al punto</option>
            <option value="Bien cocido">Bien cocido</option>
          </select>
        </div>
      ` : "";

      const sidesHtml = item.withSides ? `
        <div class="grid grid-cols-1 gap-2 md:grid-cols-2">
          <div>
            <label class="block text-xs md:text-sm text-slate-300 mb-1 font-medium">Guarnici√≥n</label>
            <select class="w-full text-xs md:text-sm bg-carb border border-slate-700 rounded-lg px-2 py-2 focus:outline-none focus:ring focus:ring-amber-500/50 guarnicion-select">
              <option value="">Selecciona una guarnici√≥n</option>
              <option value="Papas fritas">Papas fritas</option>
              <option value="Papa salteada">Papa salteada</option>
              <option value="Patacones">Patacones</option>
            </select>
          </div>
          <div>
            <label class="block text-xs md:text-sm text-slate-300 mb-1 font-medium">Ensalada</label>
            <select class="w-full text-xs md:text-sm bg-carb border border-slate-700 rounded-lg px-2 py-2 focus:outline-none focus:ring focus:ring-amber-500/50 ensalada-select">
              <option value="">Selecciona una ensalada</option>
              <option value="Ensalada de la casa">Ensalada de la casa</option>
              <option value="Ensalada mixta">Ensalada mixta</option>
            </select>
          </div>
        </div>
      ` : "";

      article.innerHTML = `
        <div class="h-40 w-full overflow-hidden cursor-pointer image-clickable">
          <img
            src="${sectionConfig.image}"
            alt="${item.name}"
            class="w-full h-full object-cover hover:scale-105 transition-transform duration-500" />
        </div>
        <div class="p-4 flex flex-col gap-3">
          <div>
            <h3 class="font-steak text-lg md:text-xl mb-1 text-amber-100 drop-shadow">${item.name}</h3>
            <p class="text-xs md:text-sm text-slate-200">
              ${item.desc || ""}
            </p>
          </div>
          <p class="text-amber-300 font-semibold text-lg md:text-xl">$${item.price.toFixed(2)}</p>
          ${puntoHtml}
          ${sidesHtml}
          <button
            class="mt-2 inline-flex justify-center items-center gap-1 rounded-full bg-gradient-to-r from-amber-500 to-red-500 hover:from-amber-400 hover:to-red-400 px-4 py-2 text-xs md:text-sm font-semibold uppercase tracking-wide transition shadow-md shadow-black/60 add-to-cart">
            Agregar al carrito
          </button>
        </div>
      `;
      return article;
    }

    function generateMenuSections() {
      const container = document.getElementById("menu-sections");
      menuSections.forEach(section => {
        const sectionEl = document.createElement("section");
        sectionEl.className = "mb-10";
        sectionEl.dataset.sectionId = section.id;
        sectionEl.dataset.tab = sectionToTab[section.id] || "carnes";

        const header = document.createElement("div");
        header.className = "mb-4 text-center";
        header.innerHTML = `
          <h2 class="font-steak text-2xl md:text-3xl mb-1 text-amber-200 drop-shadow">${section.title}</h2>
          <p class="text-slate-200 text-sm md:text-base max-w-2xl mx-auto">${section.description}</p>
        `;
        sectionEl.appendChild(header);

        const grid = document.createElement("div");
        grid.className = "grid gap-6 md:grid-cols-2 xl:grid-cols-3 justify-items-center";

        const itemsInSection = menuItems.filter(i => i.section === section.id);
        itemsInSection.forEach(item => {
          const card = createCard(item, section);
          grid.appendChild(card);
        });

        sectionEl.appendChild(grid);
        container.appendChild(sectionEl);
      });
    }

    function setActiveTab(tabId) {
      const tabsContainer = document.getElementById("menu-tabs");
      tabsContainer.querySelectorAll("button").forEach(btn => {
        if (btn.dataset.tabId === tabId) {
          btn.classList.add("bg-amber-500", "text-black", "border-amber-300");
          btn.classList.remove("bg-black/50", "text-slate-100", "border-slate-700");
        } else {
          btn.classList.remove("bg-amber-500", "text-black", "border-amber-300");
          btn.classList.add("bg-black/50", "text-slate-100", "border-slate-700");
        }
      });

      document.querySelectorAll("#menu-sections section").forEach(sec => {
        if (sec.dataset.tab === tabId) {
          sec.classList.remove("hidden");
        } else {
          sec.classList.add("hidden");
        }
      });
    }

    buildTabs();
    generateMenuSections();

    // CARRITO PANEL
    function openCart() {
      cartPanel.classList.remove("translate-x-full");
      cartOverlay.classList.remove("pointer-events-none");
      cartOverlay.classList.add("opacity-100");
    }

    function closeCart() {
      cartPanel.classList.add("translate-x-full");
      cartOverlay.classList.add("pointer-events-none");
      cartOverlay.classList.remove("opacity-100");
    }

    cartToggleBtn.addEventListener("click", openCart);
    cartCloseBtn.addEventListener("click", closeCart);
    cartOverlay.addEventListener("click", closeCart);

    function renderCart() {
      cartItemsContainer.innerHTML = "";
      let total = 0;
      let totalCantidades = 0;

      if (cart.length === 0) {
        cartItemsContainer.innerHTML =
          '<p class="text-xs md:text-sm text-slate-300">Todav√≠a no has agregado productos. Elige algo del men√∫ y agr√©galo al carrito.</p>';
      } else {
        cart.forEach((item, index) => {
          const lineTotal = item.price * item.cantidad;
          total += lineTotal;
          totalCantidades += item.cantidad;

          const div = document.createElement("div");
          div.className = "border border-slate-800/80 rounded-xl px-3 py-2 text-xs md:text-sm flex flex-col gap-1 bg-black/40";

          const titulo = document.createElement("div");
          titulo.className = "flex justify-between items-center gap-2";
          titulo.innerHTML = `
            <span class="font-semibold text-slate-100">${item.name} x${item.cantidad}</span>
            <span class="text-amber-300 font-semibold">$${lineTotal.toFixed(2)}</span>
          `;

          const detalle = document.createElement("p");
          detalle.className = "text-[11px] md:text-xs text-slate-200 leading-snug";

          let text = "";
          if (item.punto) text += `Punto: ${item.punto}. `;
          if (item.guarnicion) text += `Guarnici√≥n: ${item.guarnicion}. `;
          if (item.ensalada) text += `Ensalada: ${item.ensalada}. `;
          if (!text) text = "Sin opciones adicionales seleccionadas.";
          detalle.textContent = text;

          const acciones = document.createElement("div");
          acciones.className = "flex justify-between items-center mt-1";

          const unit = document.createElement("span");
          unit.className = "text-[11px] md:text-xs text-slate-400";
          unit.textContent = `Unitario: $${item.price.toFixed(2)}`;

          const btnEliminar = document.createElement("button");
          btnEliminar.className =
            "text-[11px] md:text-xs text-red-300 hover:text-red-200 underline underline-offset-2";
          btnEliminar.textContent = "Eliminar";
          btnEliminar.addEventListener("click", () => {
            cart.splice(index, 1);
            renderCart();
          });

          acciones.appendChild(unit);
          acciones.appendChild(btnEliminar);

          div.appendChild(titulo);
          div.appendChild(detalle);
          div.appendChild(acciones);

          cartItemsContainer.appendChild(div);
        });
      }

      cartTotalEl.textContent = `$${total.toFixed(2)}`;
      cartCountEl.textContent = totalCantidades;
    }

    function prepareItemFromCard(cardEl) {
      const name = cardEl.getAttribute("data-name");
      const price = parseFloat(cardEl.getAttribute("data-price"));

      const puntoSelect = cardEl.querySelector(".punto-select");
      const guarnicionSelect = cardEl.querySelector(".guarnicion-select");
      const ensaladaSelect = cardEl.querySelector(".ensalada-select");

      const punto = puntoSelect ? puntoSelect.value : "";
      const guarnicion = guarnicionSelect ? guarnicionSelect.value : "";
      const ensalada = ensaladaSelect ? ensaladaSelect.value : "";

      const requiresSides = !!(guarnicionSelect || ensaladaSelect);

      if (requiresSides && (!guarnicion || !ensalada)) {
        alert("Por favor, selecciona la guarnici√≥n y la ensalada antes de agregar este plato.");
        return null;
      }

      return {
        name,
        price,
        punto,
        guarnicion,
        ensalada,
        cantidad: 1
      };
    }

    function openAddModal(item) {
      pendingItem = item;
      pendingQty = 1;
      addModalNameEl.textContent = item.name;

      let extras = [];
      if (item.punto) extras.push(`Punto: ${item.punto}`);
      if (item.guarnicion) extras.push(`Guarnici√≥n: ${item.guarnicion}`);
      if (item.ensalada) extras.push(`Ensalada: ${item.ensalada}`);
      addModalExtrasEl.textContent = extras.length ? extras.join(" | ") : "Sin opciones adicionales.";

      addModalQtyEl.textContent = pendingQty.toString();
      addModalTotalEl.textContent = `$${(item.price * pendingQty).toFixed(2)}`;

      addModal.classList.remove("hidden");
    }

    function closeAddModal() {
      addModal.classList.add("hidden");
      pendingItem = null;
      pendingQty = 1;
    }

    addModalBackdrop.addEventListener("click", closeAddModal);
    addModalCancelBtn.addEventListener("click", closeAddModal);

    addModalPlusBtn.addEventListener("click", () => {
      pendingQty++;
      addModalQtyEl.textContent = pendingQty.toString();
      if (pendingItem) {
        addModalTotalEl.textContent = `$${(pendingItem.price * pendingQty).toFixed(2)}`;
      }
    });

    addModalMinusBtn.addEventListener("click", () => {
      if (pendingQty > 1) {
        pendingQty--;
        addModalQtyEl.textContent = pendingQty.toString();
        if (pendingItem) {
          addModalTotalEl.textContent = `$${(pendingItem.price * pendingQty).toFixed(2)}`;
        }
      }
    });

    addModalConfirmBtn.addEventListener("click", () => {
      if (!pendingItem) return;
      pendingItem.cantidad = pendingQty;
      cart.push(pendingItem);
      closeAddModal();
      renderCart();
      openCart();
    });

    function bindAddToCartButtons() {
      document.querySelectorAll(".add-to-cart").forEach((btn) => {
        btn.addEventListener("click", () => {
          const card = btn.closest("article[data-name]");
          if (!card) return;
          const item = prepareItemFromCard(card);
          if (item) {
            openAddModal(item);
          }
        });
      });
    }

    bindAddToCartButtons();
    setActiveTab("carnes");
    renderCart();

    // DETECCI√ìN DE MESA POR URL (?mesa=4)
    (function detectMesaFromUrl() {
      const params = new URLSearchParams(window.location.search);
      const mesa = params.get("mesa");
      if (mesa) {
        const textoActual = detalleClienteEl.value.trim();
        const prefix = `Mesa ${mesa}`;
        detalleClienteEl.value = textoActual ? `${prefix} - ${textoActual}` : prefix;
      }
    })();

    // Bot√≥n usar ubicaci√≥n actual (agrega link de Maps al textarea)
    btnUbicacion.addEventListener("click", () => {
      if (!navigator.geolocation) {
        alert("Tu navegador no permite obtener la ubicaci√≥n.");
        return;
      }
      btnUbicacion.disabled = true;
      btnUbicacion.textContent = "Obteniendo ubicaci√≥n...";

      navigator.geolocation.getCurrentPosition(
        (pos) => {
          const lat = pos.coords.latitude;
          const lng = pos.coords.longitude;
          const link = `https://www.google.com/maps?q=${lat},${lng}`;
          const texto = detalleClienteEl.value.trim();
          const extra = texto ? `${texto}\nUbicaci√≥n: ${link}` : `Ubicaci√≥n: ${link}`;
          detalleClienteEl.value = extra;
          btnUbicacion.disabled = false;
          btnUbicacion.textContent = "üìç Usar mi ubicaci√≥n actual";
        },
        (err) => {
          alert("No se pudo obtener la ubicaci√≥n. Aseg√∫rate de permitir el acceso al GPS.");
          btnUbicacion.disabled = false;
          btnUbicacion.textContent = "üìç Usar mi ubicaci√≥n actual";
        },
        {
          enableHighAccuracy: true,
          timeout: 10000,
          maximumAge: 0
        }
      );
    });

    // WhatsApp
    whatsappBtn.addEventListener("click", () => {
      if (cart.length === 0) {
        alert("Tu carrito est√° vac√≠o. Agrega al menos un producto antes de confirmar el pedido.");
        return;
      }

      const nombreCliente = document.getElementById("cliente-nombre").value.trim();
      const detalleCliente = document.getElementById("cliente-detalle").value.trim();

      if (!nombreCliente) {
        alert("Por favor, ingresa tu nombre.");
        return;
      }

      if (!detalleCliente) {
        alert("Por favor, indica tu n√∫mero de mesa o direcci√≥n de entrega.");
        return;
      }

      const servicioRadio = document.querySelector('input[name="servicio"]:checked');
      const servicio = servicioRadio ? servicioRadio.value : "mesa";
      const servicioTexto =
        servicio === "mesa" ? "PARA SERVIRSE EN LA MESA" : "ENV√çO A DOMICILIO";

      const pagoRadio = document.querySelector('input[name="pago"]:checked');
      if (!pagoRadio) {
        alert("Por favor, selecciona la forma de pago.");
        return;
      }
      const pagoTexto =
        pagoRadio.value === "transferencia" ? "Transferencia bancaria" : "Efectivo";

      const facturaNombre = document.getElementById("factura-nombre").value.trim();
      const facturaId = document.getElementById("factura-id").value.trim();
      const facturaEmail = document.getElementById("factura-email").value.trim();

      let total = 0;
      let detalle = cart
        .map((item, index) => {
          const lineTotal = item.price * item.cantidad;
          total += lineTotal;
          let extras = "";
          if (item.punto) extras += ` (${item.punto})`;
          if (item.guarnicion) extras += ` - Guarnici√≥n: ${item.guarnicion}`;
          if (item.ensalada) extras += ` - Ensalada: ${item.ensalada}`;
          return `${index + 1}) ${item.name} x${item.cantidad}${extras} - $${lineTotal.toFixed(2)}`;
        })
        .join("\n");

      let mensaje = `Hola, quiero hacer un pedido en *Le√±a y Carb√≥n* (${servicioTexto}):\n\n`;

      mensaje += `*Datos del cliente:*\n`;
      mensaje += `Nombre: ${nombreCliente}\n`;
      mensaje += `Mesa / Direcci√≥n: ${detalleCliente}\n`;
      mensaje += `Forma de pago: ${pagoTexto}\n\n`;

      if (facturaNombre || facturaId || facturaEmail) {
        mensaje += `*Datos para factura:*\n`;
        if (facturaNombre) mensaje += `Nombre/Raz√≥n social: ${facturaNombre}\n`;
        if (facturaId) mensaje += `C√©dula/RUC: ${facturaId}\n`;
        if (facturaEmail) mensaje += `Correo: ${facturaEmail}\n`;
        mensaje += `\n`;
      }

      mensaje += `*Detalle del pedido:*\n${detalle}\n\n`;
      mensaje += `Total aproximado: $${total.toFixed(2)}\n\n`;
      mensaje += `¬øMe confirmas tiempo de preparaci√≥n y forma de entrega?`;

      const encodedMessage = encodeURIComponent(mensaje);

      const phone = "593939065989";
      const url = `https://wa.me/${phone}?text=${encodedMessage}`;
      window.open(url, "_blank");
    });

    // MODAL DE IMAGEN DE PLATO
    (function initImageModal() {
      const modal = document.getElementById("image-modal");
      const modalImg = document.getElementById("image-modal-img");
      const btnClose = document.getElementById("image-modal-close");
      const backdrop = document.getElementById("image-modal-backdrop");

      function openImage(src, alt) {
        modalImg.src = src;
        modalImg.alt = alt || "Plato";
        modal.classList.remove("hidden");
      }

      function closeImage() {
        modal.classList.add("hidden");
        modalImg.src = "";
      }

      btnClose.addEventListener("click", closeImage);
      backdrop.addEventListener("click", closeImage);

      document.querySelectorAll(".image-clickable img").forEach(img => {
        img.addEventListener("click", () => {
          openImage(img.src, img.alt);
        });
      });
    })();

    // JUEGO TIPO PACMAN
    (function initPacmanGame() {
      const canvas = document.getElementById("pacman-canvas");
      if (!canvas) return;
      const ctx = canvas.getContext("2d");
      const msgEl = document.getElementById("pacman-msg");

      const tileSize = 24;
      const rows = 15;
      const cols = 22;

      canvas.width = cols * tileSize;
      canvas.height = rows * tileSize;

      const map = [
        "######################",
        "#.........##.........#",
        "#.####.#.##.#.####..#",
        "#.#  #.#.##.#.#  #..#",
        "#.#  #.#.##.#.#  #..#",
        "#.####.#.##.#.####..#",
        "#...................#",
        "#.####.######.####..#",
        "#.#  #.#    #.#  #..#",
        "#.#  #.#    #.#  #..#",
        "#.####.######.####..#",
        "#...................#",
        "#.####.######.####..#",
        "#.........##.........#",
        "######################"
      ];

      let pelletsTotal = 0;
      const grid = [];

      for (let r = 0; r < rows; r++) {
        grid[r] = [];
        for (let c = 0; c < cols; c++) {
          const ch = map[r][c];
          if (ch === "#") {
            grid[r][c] = 1; // muro
          } else {
            grid[r][c] = 0; // pasillo
            if (ch === ".") {
              pelletsTotal++;
            }
          }
        }
      }

      let pelletsRemaining = pelletsTotal;

      let pac = {
        row: 7,
        col: 3,
        dirRow: 0,
        dirCol: 1
      };

      function drawMap() {
        for (let r = 0; r < rows; r++) {
          for (let c = 0; c < cols; c++) {
            const x = c * tileSize;
            const y = r * tileSize;
            if (grid[r][c] === 1) {
              ctx.fillStyle = "#111827";
              ctx.fillRect(x, y, tileSize, tileSize);
              ctx.strokeStyle = "#f97316";
              ctx.lineWidth = 1;
              ctx.strokeRect(x + 2, y + 2, tileSize - 4, tileSize - 4);
            } else {
              ctx.fillStyle = "#020617";
              ctx.fillRect(x, y, tileSize, tileSize);
            }
            if (map[r][c] === ".") {
              ctx.beginPath();
              ctx.arc(x + tileSize / 2, y + tileSize / 2, 3, 0, Math.PI * 2);
              ctx.fillStyle = "#fde68a";
              ctx.fill();
              ctx.closePath();
            }
          }
        }
      }

      function drawPacman() {
        const x = pac.col * tileSize + tileSize / 2;
        const y = pac.row * tileSize + tileSize / 2;
        const radius = tileSize / 2 - 3;

        let angleStart = 0.25 * Math.PI;
        let angleEnd = 1.75 * Math.PI;

        if (pac.dirRow === 0 && pac.dirCol === 1) {
          angleStart = 0.25 * Math.PI;
          angleEnd = 1.75 * Math.PI;
        } else if (pac.dirRow === 0 && pac.dirCol === -1) {
          angleStart = 1.25 * Math.PI;
          angleEnd = 0.75 * Math.PI;
        } else if (pac.dirRow === -1 && pac.dirCol === 0) {
          angleStart = 1.75 * Math.PI;
          angleEnd = 1.25 * Math.PI;
        } else if (pac.dirRow === 1 && pac.dirCol === 0) {
          angleStart = 0.75 * Math.PI;
          angleEnd = 0.25 * Math.PI;
        }

        ctx.beginPath();
        ctx.moveTo(x, y);
        ctx.arc(x, y, radius, angleStart, angleEnd, false);
        ctx.closePath();
        ctx.fillStyle = "#facc15";
        ctx.fill();
      }

      function canMoveTo(row, col) {
        if (row < 0 || row >= rows || col < 0 || col >= cols) return false;
        return grid[row][col] !== 1;
      }

      function updatePacman() {
        const nextRow = pac.row + pac.dirRow;
        const nextCol = pac.col + pac.dirCol;
        if (canMoveTo(nextRow, nextCol)) {
          pac.row = nextRow;
          pac.col = nextCol;

          if (map[pac.row][pac.col] === ".") {
            const rowArr = map[pac.row].split("");
            rowArr[pac.col] = " ";
            map[pac.row] = rowArr.join("");
            pelletsRemaining--;
            if (pelletsRemaining <= 0) {
              msgEl.textContent = "¬°Felicitaciones! Te comiste todos los puntos üî•";
              setTimeout(resetGame, 2000);
            }
          }
        }
      }

      function draw() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        drawMap();
        drawPacman();
      }

      function gameLoop() {
        updatePacman();
        draw();
      }

      let loop = setInterval(gameLoop, 150);

      function resetGame() {
        clearInterval(loop);
        const baseMap = [
          "######################",
          "#.........##.........#",
          "#.####.#.##.#.####..#",
          "#.#  #.#.##.#.#  #..#",
          "#.#  #.#.##.#.#  #..#",
          "#.####.#.##.#.####..#",
          "#...................#",
          "#.####.######.####..#",
          "#.#  #.#    #.#  #..#",
          "#.#  #.#    #.#  #..#",
          "#.####.######.####..#",
          "#...................#",
          "#.####.######.####..#",
          "#.........##.........#",
          "######################"
        ];
        pelletsTotal = 0;
        for (let r = 0; r < rows; r++) {
          for (let c = 0; c < cols; c++) {
            if (baseMap[r][c] === ".") pelletsTotal++;
          }
          map[r] = baseMap[r];
        }
        pelletsRemaining = pelletsTotal;
        pac = { row: 7, col: 3, dirRow: 0, dirCol: 1 };
        msgEl.textContent = "";
        draw();
        loop = setInterval(gameLoop, 150);
      }

      function setDirection(dr, dc) {
        const testRow = pac.row + dr;
        const testCol = pac.col + dc;
        if (canMoveTo(testRow, testCol)) {
          pac.dirRow = dr;
          pac.dirCol = dc;
        }
      }

      document.addEventListener("keydown", (e) => {
        if (e.key === "ArrowUp") setDirection(-1, 0);
        if (e.key === "ArrowDown") setDirection(1, 0);
        if (e.key === "ArrowLeft") setDirection(0, -1);
        if (e.key === "ArrowRight") setDirection(0, 1);
      });

      const btnUp = document.getElementById("btn-up");
      const btnDown = document.getElementById("btn-down");
      const btnLeft = document.getElementById("btn-left");
      const btnRight = document.getElementById("btn-right");
      const btnRestart = document.getElementById("btn-restart");

      btnUp.addEventListener("click", () => setDirection(-1, 0));
      btnDown.addEventListener("click", () => setDirection(1, 0));
      btnLeft.addEventListener("click", () => setDirection(0, -1));
      btnRight.addEventListener("click", () => setDirection(0, 1));
      btnRestart.addEventListener("click", () => resetGame());

      // Soporte t√°ctil tipo "tap"
      [btnUp, btnDown, btnLeft, btnRight].forEach(btn => {
        btn.addEventListener("touchstart", (e) => {
          e.preventDefault();
          btn.click();
        }, { passive: false });
      });

      draw();
    })();
  </script>
</body>
</html>
