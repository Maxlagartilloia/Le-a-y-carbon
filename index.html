<!DOCTYPE html>
<html lang="es" class="scroll-smooth">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Leña y Carbón - Menú Digital</title>

  <!-- Tailwind CSS CDN -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Fuentes -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link
    href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600;700&family=Poppins:wght@300;400;500;600&display=swap"
    rel="stylesheet"
  />

  <style>
    body {
      font-family: "Poppins", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: radial-gradient(circle at top, #3b1f14 0, #0a0503 45%, #050304 100%);
      color: #f9fafb;
    }
    .font-steak {
      font-family: "Playfair Display", "Times New Roman", serif;
    }
    .bg-madera {
      background: #2b1b12;
    }
    .bg-carb {
      background: #121212;
    }
    .scrollbar-thin::-webkit-scrollbar {
      width: 6px;
    }
    .scrollbar-thin::-webkit-scrollbar-track {
      background: #111827;
    }
    .scrollbar-thin::-webkit-scrollbar-thumb {
      background: #4b5563;
      border-radius: 999px;
    }

    /* Chispas de carbón / fuego flotantes */
    .spark-layer {
      position: fixed;
      inset: 0;
      pointer-events: none;
      z-index: -1;
      overflow: hidden;
    }
    .spark {
      position: absolute;
      width: 6px;
      height: 6px;
      border-radius: 999px;
      background: radial-gradient(circle, #fbbf24, #b91c1c);
      opacity: 0.55;
      filter: blur(1px);
      animation: floatUp 14s linear infinite;
    }
    .spark:nth-child(2) { width: 8px; height: 8px; animation-duration: 18s; opacity: 0.4; }
    .spark:nth-child(3) { width: 5px; height: 5px; animation-duration: 16s; opacity: 0.6; }
    .spark:nth-child(4) { width: 7px; height: 7px; animation-duration: 20s; opacity: 0.45; }
    .spark:nth-child(5) { width: 4px; height: 4px; animation-duration: 13s; opacity: 0.7; }

    .spark-1 { left: 10%; bottom: -10%; animation-delay: 0s; }
    .spark-2 { left: 35%; bottom: -15%; animation-delay: -3s; }
    .spark-3 { left: 60%; bottom: -12%; animation-delay: -6s; }
    .spark-4 { left: 80%; bottom: -18%; animation-delay: -9s; }
    .spark-5 { left: 50%; bottom: -20%; animation-delay: -12s; }

    @keyframes floatUp {
      0% {
        transform: translateY(0) translateX(0);
        opacity: 0.7;
      }
      50% {
        transform: translateY(-60vh) translateX(10px);
        opacity: 0.9;
      }
      100% {
        transform: translateY(-120vh) translateX(-10px);
        opacity: 0;
      }
    }
  </style>
</head>
<body class="min-h-screen text-slate-100">

  <!-- CAPA DE CHISPAS -->
  <div class="spark-layer">
    <div class="spark spark-1"></div>
    <div class="spark spark-2"></div>
    <div class="spark spark-3"></div>
    <div class="spark spark-4"></div>
    <div class="spark spark-5"></div>
  </div>

  <!-- CONTENEDOR GENERAL -->
  <div class="min-h-screen flex flex-col">

    <!-- HEADER / HERO -->
    <header class="relative overflow-hidden border-b border-slate-800/60">
      <div class="absolute inset-0 opacity-40 pointer-events-none"
           style="background-image: url('https://images.unsplash.com/photo-1558030041-382d9454a9f3?auto=format&fit=crop&w=1400&q=80'); background-size: cover; background-position: center;">
      </div>
      <div class="absolute inset-0 bg-gradient-to-br from-black via-black/80 to-amber-900/40"></div>

      <div class="relative max-w-6xl mx-auto px-4 py-6 flex items-center justify-between gap-4">
        <div class="max-w-xl">
          <h1 class="font-steak text-3xl md:text-4xl tracking-wide">
            <span class="text-amber-400">Leña</span> y <span class="text-red-400">Carbón</span>
          </h1>
          <p class="text-sm md:text-base text-slate-200/80">
            Donde el fuego manda y el sabor decide. Elige tus cortes, guarniciones y bebidas, y envía tu pedido directo a la cocina.
          </p>
        </div>

        <!-- ICONO CARRITO -->
        <button id="cart-toggle"
                class="relative inline-flex items-center gap-2 rounded-full bg-amber-600/90 hover:bg-amber-500 px-4 py-2 text-sm font-semibold shadow-lg shadow-amber-900/40 transition">
          <span>Carrito</span>
          <span id="cart-count"
                class="inline-flex items-center justify-center rounded-full bg-black/70 text-xs w-6 h-6 border border-amber-300/60">
            0
          </span>
        </button>
      </div>
    </header>

    <!-- SECCIÓN HISTORIA / DUEÑO (aprovecha el lado derecho en tablet/desktop) -->
    <section class="max-w-6xl mx-auto px-4 pt-6 pb-4">
      <div class="grid md:grid-cols-3 gap-6 items-center">
        <div class="md:col-span-2 space-y-2">
          <h2 class="font-steak text-2xl md:text-3xl">La historia de Leña y Carbón</h2>
          <p class="text-sm md:text-base text-slate-200/90">
            Leña y Carbón nace del sueño de convertir cada comida en una experiencia alrededor del fuego.
            Aquí la parrilla no es solo una forma de cocinar, es el centro de la reunión, de las risas, de las historias
            que se cuentan mientras el carbón enciende el sabor.
          </p>
          <p class="text-sm md:text-base text-slate-300/90">
            Cada corte, cada guarnición y cada bebida han sido pensados para que disfrutes sin apuro: en familia,
            con amigos, celebrando algo grande o simplemente porque hoy se te antojó comer bien.
          </p>
        </div>

        <div class="md:col-span-1">
          <div class="bg-madera/90 border border-amber-900/60 rounded-2xl p-4 flex flex-col items-center text-center shadow-xl shadow-black/60">
            <div class="w-24 h-24 rounded-full overflow-hidden border-2 border-amber-400 mb-3">
              <!-- Cambia esta foto por la del dueño real -->
              <img src="https://images.unsplash.com/photo-1544025162-d76694265947?auto=format&fit=crop&w=400&q=80"
                   alt="Dueño Leña y Carbón" class="w-full h-full object-cover">
            </div>
            <p class="text-xs uppercase tracking-[0.2em] text-amber-300 mb-1">Propietario</p>
            <h3 class="font-steak text-lg mb-1">[Nombre del propietario]</h3>
            <p class="text-xs text-slate-300">
              Apasionado por el fuego, la carne y el servicio. Su misión: que cada mesa salga con el estómago lleno
              y el corazón contento.
            </p>
          </div>
        </div>
      </div>
    </section>

    <!-- TABS DEL MENÚ -->
    <section class="max-w-6xl mx-auto px-4 pt-2 pb-4">
      <div id="menu-tabs" class="flex gap-2 overflow-x-auto pb-2 scrollbar-thin"></div>
    </section>

    <!-- CONTENIDO PRINCIPAL DEL MENÚ -->
    <main class="flex-1">
      <section id="menu" class="max-w-6xl mx-auto px-4 pb-8">
        <div id="menu-sections" class="space-y-10"></div>
      </section>

      <!-- JUEGO ROMPEBLOQUES -->
      <section class="max-w-6xl mx-auto px-4 pb-12">
        <h2 class="font-steak text-2xl md:text-3xl mb-1">Juega mientras esperas tu pedido</h2>
        <p class="text-slate-300 text-sm md:text-base mb-4 max-w-2xl">
          Rompe los bloques moviendo la barra y no dejes caer la bola. Ideal para matar el tiempo mientras llega tu parrilla.
        </p>
        <div class="bg-madera/90 border border-amber-900/50 rounded-2xl p-4 flex flex-col md:flex-row gap-4 items-center shadow-xl shadow-black/60">
          <canvas id="breakout" width="480" height="260" class="bg-black rounded-lg border border-slate-800"></canvas>
          <div class="flex md:flex-col gap-3 w-full md:w-auto justify-center">
            <button id="btn-left" class="px-5 py-2 rounded-full bg-slate-900/80 border border-slate-600 text-xs font-semibold hover:bg-slate-800">
              ◀
            </button>
            <button id="btn-right" class="px-5 py-2 rounded-full bg-slate-900/80 border border-slate-600 text-xs font-semibold hover:bg-slate-800">
              ▶
            </button>
            <button id="btn-restart" class="px-5 py-2 rounded-full bg-amber-600 text-xs font-semibold hover:bg-amber-500">
              Reiniciar
            </button>
          </div>
        </div>
      </section>
    </main>
  </div>

  <!-- CARRITO LATERAL -->
  <aside id="cart-panel"
         class="fixed inset-y-0 right-0 w-full max-w-md bg-carb border-l border-slate-800 shadow-2xl shadow-black/70 transform translate-x-full transition-transform duration-300 z-40 flex flex-col">
    <div class="flex items-center justify-between px-4 py-3 border-b border-slate-800/80">
      <h2 class="font-steak text-xl">Tu pedido</h2>
      <button id="cart-close" class="text-sm text-slate-300 hover:text-white">Cerrar ✕</button>
    </div>

    <div class="flex-1 overflow-y-auto px-4 py-3 space-y-3 scrollbar-thin" id="cart-items">
      <!-- Items del carrito -->
    </div>

    <div class="border-t border-slate-800/80 px-4 py-3 space-y-3 bg-black/40">
      <!-- Tipo de servicio -->
      <div>
        <p class="text-xs font-semibold text-slate-200 mb-1">¿Cómo deseas tu pedido?</p>
        <div class="space-y-1 text-xs">
          <label class="inline-flex items-center gap-2">
            <input type="radio" name="servicio" value="mesa" class="accent-amber-500" checked />
            <span>Para servirse en la mesa</span>
          </label>
          <label class="inline-flex items-center gap-2 block">
            <input type="radio" name="servicio" value="domicilio" class="accent-amber-500" />
            <span>Para llevar / domicilio</span>
          </label>
        </div>
      </div>

      <!-- Datos del cliente -->
      <div class="space-y-2">
        <p class="text-xs font-semibold text-slate-200">Datos del cliente</p>

        <div>
          <label for="cliente-nombre" class="block text-[11px] text-slate-300 mb-1">Nombre del cliente *</label>
          <input
            id="cliente-nombre"
            type="text"
            class="w-full bg-carb border border-slate-700 rounded-lg px-2 py-1.5 text-xs focus:outline-none focus:ring focus:ring-amber-500/50"
            placeholder="Ej: Cristian Lombeida" />
        </div>

        <div>
          <label for="cliente-detalle" class="block text-[11px] text-slate-300 mb-1">
            Número de mesa o dirección de entrega *
          </label>
          <textarea
            id="cliente-detalle"
            rows="2"
            class="w-full bg-carb border border-slate-700 rounded-lg px-2 py-1.5 text-xs focus:outline-none focus:ring focus:ring-amber-500/50"
            placeholder="Ej: Mesa 4 / Barrio X, calle Y, cerca de..."></textarea>
        </div>
      </div>

      <!-- Forma de pago -->
      <div class="space-y-2">
        <p class="text-xs font-semibold text-slate-200 mb-1">Forma de pago *</p>
        <div class="space-y-1 text-xs">
          <label class="inline-flex items-center gap-2">
            <input type="radio" name="pago" value="efectivo" class="accent-amber-500" />
            <span>Efectivo</span>
          </label>
          <label class="inline-flex items-center gap-2 block">
            <input type="radio" name="pago" value="transferencia" class="accent-amber-500" />
            <span>Transferencia bancaria</span>
          </label>
        </div>

        <!-- Info bancaria (solo informativa) -->
        <div class="mt-1 border border-amber-700/60 bg-amber-900/20 rounded-lg px-3 py-2 text-[10px] text-amber-100 leading-snug">
          <p class="font-semibold mb-1">Datos para transferencia (ejemplo):</p>
          <p>Banco: ___________________________</p>
          <p>Tipo de cuenta: Ahorros / Corriente</p>
          <p>Número de cuenta: ________________</p>
          <p>Titular: ___________________________</p>
          <p class="mt-1 italic">* Enviar comprobante por WhatsApp al confirmar el pedido.</p>
        </div>
      </div>

      <!-- Datos para factura (opcionales) -->
      <div class="space-y-2">
        <p class="text-xs font-semibold text-slate-200 mb-1">Datos para factura (opcional)</p>
        <div class="grid grid-cols-1 gap-2">
          <input
            id="factura-nombre"
            type="text"
            class="w-full bg-carb border border-slate-700 rounded-lg px-2 py-1.5 text-xs focus:outline-none focus:ring focus:ring-amber-500/50"
            placeholder="Nombre / Razón social" />
          <input
            id="factura-id"
            type="text"
            class="w-full bg-carb border border-slate-700 rounded-lg px-2 py-1.5 text-xs focus:outline-none focus:ring focus:ring-amber-500/50"
            placeholder="Cédula / RUC" />
          <input
            id="factura-email"
            type="email"
            class="w-full bg-carb border border-slate-700 rounded-lg px-2 py-1.5 text-xs focus:outline-none focus:ring focus:ring-amber-500/50"
            placeholder="Correo electrónico" />
        </div>
      </div>

      <!-- Total -->
      <div class="flex items-center justify-between text-sm pt-1">
        <span class="text-slate-300">Total aproximado:</span>
        <span id="cart-total" class="text-amber-300 font-semibold">$0.00</span>
      </div>

      <!-- Botón WhatsApp -->
      <button id="whatsapp-btn"
              class="w-full inline-flex justify-center items-center gap-2 rounded-full bg-emerald-600 hover:bg-emerald-500 px-4 py-2.5 text-sm font-semibold transition shadow-lg shadow-emerald-900/40">
        Confirmar pedido por WhatsApp
      </button>

      <p class="text-[10px] text-slate-400">
        * El precio final puede variar ligeramente según disponibilidad y cambios en el día.
      </p>
    </div>
  </aside>

  <!-- OVERLAY DEL CARRITO -->
  <div id="cart-overlay"
       class="fixed inset-0 bg-black/50 backdrop-blur-sm z-30 opacity-0 pointer-events-none transition-opacity duration-300"></div>

  <!-- SCRIPT -->
  <script>
    const cart = [];

    const cartToggleBtn = document.getElementById("cart-toggle");
    const cartPanel = document.getElementById("cart-panel");
    const cartOverlay = document.getElementById("cart-overlay");
    const cartCloseBtn = document.getElementById("cart-close");
    const cartItemsContainer = document.getElementById("cart-items");
    const cartTotalEl = document.getElementById("cart-total");
    const cartCountEl = document.getElementById("cart-count");
    const whatsappBtn = document.getElementById("whatsapp-btn");

    // TABS
    const tabs = [
      { id: "carnes", label: "Carnes & Parrilladas" },
      { id: "entradas", label: "Entradas & Niños" },
      { id: "desayunos", label: "Desayunos" },
      { id: "bebidas-frias", label: "Bebidas frías" },
      { id: "cocteles", label: "Cocteles & Tragos" },
      { id: "jugos", label: "Jugos & Gaseosas" }
    ];

    // Map de secciones -> pestaña
    const sectionToTab = {
      "cortes-angus": "carnes",
      "parrilladas": "carnes",
      "espada": "carnes",
      "alitas": "carnes",
      "lomitos": "carnes",
      "ubre": "carnes",
      "mariscos": "carnes",
      "carnes-cerdo": "carnes",
      "costillas-barril": "carnes",
      "costillas-texas": "carnes",
      "arroz-moro": "carnes",

      "entradas-fastfood": "entradas",
      "ninos": "entradas",

      "desayunos": "desayunos",

      "bebidas-batidos": "bebidas-frias",

      "bebidas-cocteles": "cocteles",

      "gaseosas-cervezas": "jugos",
      "jugos-naturales": "jugos"
    };

    // Secciones del menú (config visual)
    const menuSections = [
      {
        id: "cortes-angus",
        title: "Cortes Premium Angus Americana",
        description: "Cortes Angus importados, con el sello de la parrilla al carbón. Incluyen papas, piña asada, ensalada, chimichurri y salsa.",
        image: "https://images.unsplash.com/photo-1553163147-622ab57be1c7?auto=format&fit=crop&w=1200&q=80"
      },
      {
        id: "parrilladas",
        title: "Parrilladas",
        description: "Parrilladas personales o para compartir, con carnes mixtas y acompañantes.",
        image: "https://images.unsplash.com/photo-1529193586396-0f02186e1120?auto=format&fit=crop&w=1200&q=80"
      },
      {
        id: "espada",
        title: "Especial a la espada",
        description: "Selección de cortes premium servidos a la espada.",
        image: "https://images.unsplash.com/photo-1544025162-d76694265947?auto=format&fit=crop&w=1200&q=80"
      },
      {
        id: "alitas",
        title: "Alitas",
        description: "Alitas bañadas en tu salsa favorita, con papas y ensalada.",
        image: "https://images.unsplash.com/photo-1608038509085-9b0c5a59c3b8?auto=format&fit=crop&w=1200&q=80"
      },
      {
        id: "lomitos",
        title: "Lomitos",
        description: "Lomitos de carne y pollo con papas, ensalada y salsas.",
        image: "https://images.unsplash.com/photo-1569058242567-94d6919aaf13?auto=format&fit=crop&w=1200&q=80"
      },
      {
        id: "ubre",
        title: "Ubre Asada",
        description: "Ubre asada al carbón con acompañantes.",
        image: "https://images.unsplash.com/photo-1514933651103-005eec06c04b?auto=format&fit=crop&w=1200&q=80"
      },
      {
        id: "mariscos",
        title: "Mariscos",
        description: "Sabores del mar a la parrilla.",
        image: "https://images.unsplash.com/photo-1466637574441-749b8f19452f?auto=format&fit=crop&w=1200&q=80"
      },
      {
        id: "carnes-cerdo",
        title: "Carnes de Cerdo",
        description: "Mata hambres y pancetas con el toque ahumado de la casa.",
        image: "https://images.unsplash.com/photo-1608038509085-9b0c5a59c3b8?auto=format&fit=crop&w=1200&q=80"
      },
      {
        id: "costillas-barril",
        title: "Costillas de Cerdo al Barril",
        description: "Costillas al barril con diferentes acompañantes.",
        image: "https://images.unsplash.com/photo-1505576399279-565b52d4ac71?auto=format&fit=crop&w=1200&q=80"
      },
      {
        id: "arroz-moro",
        title: "Arroz Moro",
        description: "Arroz moro con diferentes proteínas.",
        image: "https://images.unsplash.com/photo-1546069901-d5bfd2cbfb1f?auto=format&fit=crop&w=1200&q=80"
      },
      {
        id: "entradas-fastfood",
        title: "Entradas & Fast Food",
        description: "Para picar, compartir o acompañar tus platos fuertes.",
        image: "https://images.unsplash.com/photo-1513104890138-7c749659a591?auto=format&fit=crop&w=1200&q=80"
      },
      {
        id: "ninos",
        title: "Menú para Niños",
        description: "Opciones pensadas para los más pequeños.",
        image: "https://images.unsplash.com/photo-1604908176997-1251884b08a6?auto=format&fit=crop&w=1200&q=80"
      },
      {
        id: "desayunos",
        title: "Desayunos (7:00 am - 2:00 pm)",
        description: "Desayunos típicos para empezar el día con energía.",
        image: "https://images.unsplash.com/photo-1525351484163-7529414344d8?auto=format&fit=crop&w=1200&q=80"
      },
      {
        id: "bebidas-batidos",
        title: "Batidos, Granizados, Helados y Frappés",
        description: "Bebidas frías, helados y frappés para refrescar tu visita.",
        image: "https://images.unsplash.com/photo-1481391032119-d89fee407e44?auto=format&fit=crop&w=1200&q=80"
      },
      {
        id: "bebidas-cocteles",
        title: "Cocteles & Tragos",
        description: "Cocteles clásicos y sangrías.",
        image: "https://images.unsplash.com/photo-1601924582971-dbee1a7a0d95?auto=format&fit=crop&w=1200&q=80"
      },
      {
        id: "gaseosas-cervezas",
        title: "Gaseosas, Aguas & Cervezas",
        description: "Bebidas embotelladas y cervezas.",
        image: "https://images.unsplash.com/photo-1544070078-a212eda27b43?auto=format&fit=crop&w=1200&q=80"
      },
      {
        id: "jugos-naturales",
        title: "Jugos Naturales (Jarras)",
        description: "Jarras de jugo natural en diferentes sabores y tamaños.",
        image: "https://images.unsplash.com/photo-1577803645773-f96470509666?auto=format&fit=crop&w=1200&q=80"
      },
      {
        id: "costillas-texas",
        title: "Costillas Ahumadas Texas (Fin de semana)",
        description: "Costillas ahumadas estilo americano, disponibles fines de semana.",
        image: "https://images.unsplash.com/photo-1530373239216-42518e6b4064?auto=format&fit=crop&w=1200&q=80"
      }
    ];

    // Ítems del menú (mismo contenido que antes)
    const menuItems = [
      // CORTES ANGUS
      {
        section: "cortes-angus",
        name: "Picaña Angus 320gr",
        price: 17.00,
        desc: "Picaña Angus 320gr, papas fritas o papa salteada, piña asada, ensalada, chimichurri y salsa.",
        withSides: true,
        withPunto: true
      },
      {
        section: "cortes-angus",
        name: "Lomo Fino 400gr",
        price: 15.00,
        desc: "Lomo fino 400gr, papas fritas o papa salteada, piña asada, ensalada, chimichurri y salsa.",
        withSides: true,
        withPunto: true
      },
      {
        section: "cortes-angus",
        name: "1/2 Lomo Fino 225gr",
        price: 10.00,
        desc: "Media porción de lomo fino, con papas, piña asada y ensalada.",
        withSides: true,
        withPunto: true
      },
      {
        section: "cortes-angus",
        name: "Tomahawk Steak Angus 500gr",
        price: 20.00,
        desc: "Tomahawk Angus 500gr, papas, piña asada, ensalada, chimichurri y salsa.",
        withSides: true,
        withPunto: true
      },
      {
        section: "cortes-angus",
        name: "Ribeye Angus 400gr",
        price: 16.00,
        desc: "Ribeye 400gr, corte marmoleado, papas, piña asada, ensalada, chimichurri y salsa.",
        withSides: true,
        withPunto: true
      },
      {
        section: "cortes-angus",
        name: "T-Bone Angus 350gr",
        price: 16.00,
        desc: "T-Bone 350gr, lomo y filete en un mismo hueso, con acompañantes.",
        withSides: true,
        withPunto: true
      },
      {
        section: "cortes-angus",
        name: "New York Steak Angus 400gr",
        price: 17.00,
        desc: "New York 400gr, corte firme y jugoso, con papas, piña asada y ensalada.",
        withSides: true,
        withPunto: true
      },

      // PARRILLADAS
      {
        section: "parrilladas",
        name: "Parrillada Personal",
        price: 12.00,
        desc: "Lomo de res, chuleta, pechuga, chorizo, papas fritas o papa salteada o patacones, piña asada, ensalada, chimichurri y salsa.",
        withSides: true
      },
      {
        section: "parrilladas",
        name: "Parrillada para Dos",
        price: 25.00,
        desc: "Parrillada mixta para compartir: lomo de res, chuleta, pechuga, chorizo, papas, piña asada, ensalada, chimichurri y salsa.",
        withSides: true
      },

      // ESPADA
      {
        section: "espada",
        name: "Lomo Fino + Picaña + Ribeye 850gr (a la espada)",
        price: 40.00,
        desc: "Selección de cortes premium a la espada, con papas, piña asada, ensalada, chimichurri y salsa.",
        withSides: true,
        withPunto: true
      },

      // ALITAS
      {
        section: "alitas",
        name: "Alitas x6 (BBQ / Maracuyá / Miel Mostaza)",
        price: 6.00,
        desc: "Alitas a tu salsa favorita, con papas fritas, ensalada y salsas.",
        withSides: false
      },

      // LOMITOS
      {
        section: "lomitos",
        name: "Lomito de carne y pollo",
        price: 5.00,
        desc: "Lomito mixto de carne y pollo, papas fritas, ensalada y salsas.",
        withSides: false
      },

      // UBRE
      {
        section: "ubre",
        name: "Ubre Asada",
        price: 7.00,
        desc: "Ubre asada al carbón, con papas fritas, papa salteada o patacones, ensalada y salsas.",
        withSides: true
      },

      // MARISCOS
      {
        section: "mariscos",
        name: "Camarón Reventado",
        price: 8.00,
        desc: "Camarones apanados, con papas fritas o patacones, ensalada, chimichurri y salsa.",
        withSides: true
      },

      // CARNES DE CERDO
      {
        section: "carnes-cerdo",
        name: "Mata Hambre al Limón",
        price: 10.00,
        desc: "Carne de cerdo al limón, con papas, papa salteada o patacones, piña caramelizada, ensalada, chimichurri y salsa.",
        withSides: true
      },
      {
        section: "carnes-cerdo",
        name: "Mata Hambre a la Pizza",
        price: 15.00,
        desc: "Carne de cerdo cubierta con queso y estilo pizza, con papas, piña caramelizada, ensalada y salsas.",
        withSides: true
      },
      {
        section: "carnes-cerdo",
        name: "Panceta Reventada",
        price: 10.00,
        desc: "Panceta 400gr, guacamole, papas, papa salteada o patacones, piña caramelizada, ensalada, chimichurri y salsa.",
        withSides: true
      },
      {
        section: "carnes-cerdo",
        name: "Panceta Reventada + Costilla",
        price: 15.00,
        desc: "Panceta 400gr + costilla, guacamole, papas, papa salteada o patacones, piña caramelizada, ensalada, chimichurri y salsa.",
        withSides: true
      },

      // COSTILLAS AL BARRIL
      {
        section: "costillas-barril",
        name: "Costilla Personal + Chorizo Paisa",
        price: 6.00,
        desc: "Costilla de cerdo al barril, chorizo paisa, papas o patacones, piña caramelizada, ensalada y salsa.",
        withSides: true
      },
      {
        section: "costillas-barril",
        name: "Costilla Personal + Arroz blanco y menestra",
        price: 6.50,
        desc: "Costilla, chorizo, arroz blanco, menestra, papas, piña caramelizada, ensalada y salsa.",
        withSides: false
      },
      {
        section: "costillas-barril",
        name: "Costilla Personal BBQ Americano",
        price: 7.50,
        desc: "Costilla con salsa BBQ americana, chorizo, papas, piña caramelizada, ensalada y salsa.",
        withSides: true
      },
      {
        section: "costillas-barril",
        name: "Costilla Personal + Arroz Moro",
        price: 8.50,
        desc: "Costilla, chorizo, arroz moro, papas o patacones, piña caramelizada, ensalada, chimichurri y salsa.",
        withSides: true
      },
      {
        section: "costillas-barril",
        name: "Costilla Personal + MoroChoclo",
        price: 9.50,
        desc: "Costilla, chorizo, arroz moro con choclo, papas o patacones, piña caramelizada, ensalada, chimichurri y salsa.",
        withSides: true
      },

      // ARROZ MORO
      { section: "arroz-moro", name: "Arroz Moro con Lomo de Res", price: 7.00, desc: "Arroz moro con lomo de res.", withSides: false },
      { section: "arroz-moro", name: "Arroz Moro con Chuleta", price: 7.00, desc: "Arroz moro con chuleta.", withSides: false },
      { section: "arroz-moro", name: "Arroz Moro con Costillar de Res", price: 7.00, desc: "Arroz moro con costillar de res.", withSides: false },
      { section: "arroz-moro", name: "Arroz Moro con Costillar de Cerdo", price: 7.00, desc: "Arroz moro con costillar de cerdo.", withSides: false },
      { section: "arroz-moro", name: "Arroz Moro con Costilla Ahumada", price: 7.00, desc: "Arroz moro con costilla ahumada.", withSides: false },
      { section: "arroz-moro", name: "Arroz Moro con Pechuga a la Plancha", price: 7.00, desc: "Arroz moro con pechuga a la plancha.", withSides: false },

      // ENTRADAS & FAST FOOD
      {
        section: "entradas-fastfood",
        name: "Chistorra a la parrilla",
        price: 6.00,
        desc: "Chistorra dorada al carbón, ideal para compartir.",
        withSides: false
      },
      {
        section: "entradas-fastfood",
        name: "Patacones con queso",
        price: 3.50,
        desc: "Patacones con queso fundido.",
        withSides: false
      },
      {
        section: "entradas-fastfood",
        name: "Papas fritas + salsas",
        price: 2.50,
        desc: "Papas fritas con salsas de la casa.",
        withSides: false
      },
      {
        section: "entradas-fastfood",
        name: "Hamburguesa normal",
        price: 4.50,
        desc: "Carne de res 200g, queso cheddar, tocino, cebolla caramelizada, vegetales, papas fritas y salsas.",
        withSides: false
      },
      {
        section: "entradas-fastfood",
        name: "Hamburguesa de casa",
        price: 6.00,
        desc: "Hamburguesa especial con mozzarela, cheddar, tocino, chorizo paisa, piña asada, vegetales y papas fritas.",
        withSides: false
      },
      {
        section: "entradas-fastfood",
        name: "Salchipapa",
        price: 3.50,
        desc: "Papas fritas con salchicha y salsas.",
        withSides: false
      },

      // MENÚ NIÑOS
      {
        section: "ninos",
        name: "Nuggets + Pulp + Nucita",
        price: 6.00,
        desc: "Nuggets con papas fritas o patacones, salsas, bebida Pulp y Nucita.",
        withSides: false
      },
      {
        section: "ninos",
        name: "Nuggets + Salchicha + Pulp + Nucita",
        price: 7.00,
        desc: "Nuggets y salchicha con papas fritas o patacones, salsas, Pulp y Nucita.",
        withSides: false
      },

      // DESAYUNOS
      { section: "desayunos", name: "Bolón de queso", price: 3.00, desc: "Bolón de verde con queso.", withSides: false },
      { section: "desayunos", name: "Bolón de chicharrón", price: 3.50, desc: "Bolón de verde con chicharrón.", withSides: false },
      { section: "desayunos", name: "Bolón mixto", price: 4.00, desc: "Bolón de verde con queso y chicharrón.", withSides: false },
      { section: "desayunos", name: "Bolón mixto especial", price: 6.50, desc: "Bolón con extra de ingredientes de la casa.", withSides: false },
      { section: "desayunos", name: "Bolón de camarón", price: 5.00, desc: "Bolón de verde relleno de camarón.", withSides: false },
      { section: "desayunos", name: "Tigrillo", price: 3.75, desc: "Tigrillo tradicional.", withSides: false },
      { section: "desayunos", name: "Mote pillo", price: 3.00, desc: "Mote pillo suave y cremoso.", withSides: false },
      { section: "desayunos", name: "Patacones con seco de carne", price: 3.00, desc: "Patacones con seco de carne.", withSides: false },
      { section: "desayunos", name: "Empanadas de viento + café", price: 1.25, desc: "Empanada de viento acompañada de café.", withSides: false },
      { section: "desayunos", name: "Tortillas de yuca", price: 2.00, desc: "Tortillas de yuca doradas.", withSides: false },
      { section: "desayunos", name: "2 tortillas de verde", price: 3.00, desc: "Tortillas de verde.", withSides: false },
      { section: "desayunos", name: "Tortillas de trigo", price: 1.75, desc: "Tortillas de trigo tradicionales.", withSides: false },
      { section: "desayunos", name: "Encocado de pescado o camarón", price: 6.00, desc: "Encocado típico de pescado o camarón.", withSides: false },

      // BATIDOS, HELADOS, FRAPPÉS
      { section: "bebidas-batidos", name: "Batido de mora", price: 2.25, desc: "Batido de mora cremoso.", withSides: false },
      { section: "bebidas-batidos", name: "Batido de fresa", price: 2.25, desc: "Batido de fresa cremoso.", withSides: false },
      { section: "bebidas-batidos", name: "Batido de piñacoco", price: 2.75, desc: "Batido de piña con coco.", withSides: false },
      { section: "bebidas-batidos", name: "Batido de fresapiña", price: 2.75, desc: "Batido de fresa y piña.", withSides: false },
      { section: "bebidas-batidos", name: "Granizado de fresa", price: 2.25, desc: "Granizado de fresa.", withSides: false },
      { section: "bebidas-batidos", name: "Helado de copa normal", price: 1.75, desc: "Helado en copa tamaño normal.", withSides: false },
      { section: "bebidas-batidos", name: "Helado de copa grande", price: 2.25, desc: "Helado en copa grande.", withSides: false },
      { section: "bebidas-batidos", name: "Frappé de Oreo", price: 3.00, desc: "Frappé sabor Oreo.", withSides: false },
      { section: "bebidas-batidos", name: "Frappé de capuchino", price: 3.50, desc: "Frappé sabor capuchino.", withSides: false },
      { section: "bebidas-batidos", name: "Frappé de mocca", price: 3.50, desc: "Frappé sabor mocca.", withSides: false },
      { section: "bebidas-batidos", name: "Frappé de avellana", price: 3.50, desc: "Frappé sabor avellana.", withSides: false },

      // COCTELES
      { section: "bebidas-cocteles", name: "Mojito", price: 6.00, desc: "Coctel clásico con hierbabuena y limón.", withSides: false },
      { section: "bebidas-cocteles", name: "Daiquiri de fresa", price: 6.00, desc: "Coctel de fresa.", withSides: false },
      { section: "bebidas-cocteles", name: "Piña colada", price: 6.00, desc: "Coctel cremoso de piña y coco.", withSides: false },
      { section: "bebidas-cocteles", name: "Cuba libre", price: 6.00, desc: "Ron con cola y limón.", withSides: false },
      { section: "bebidas-cocteles", name: "Sangría pequeña", price: 6.00, desc: "Sangría en jarra pequeña.", withSides: false },
      { section: "bebidas-cocteles", name: "Sangría grande", price: 12.00, desc: "Sangría en jarra grande.", withSides: false },
      { section: "bebidas-cocteles", name: "Copa de vino", price: 3.00, desc: "Copa de vino tinto o blanco.", withSides: false },

      // GASEOSAS, AGUAS, CERVEZAS
      { section: "gaseosas-cervezas", name: "Cola personal", price: 0.75, desc: "Gaseosa personal.", withSides: false },
      { section: "gaseosas-cervezas", name: "Cola 1250ml", price: 1.75, desc: "Botella de cola 1.25L.", withSides: false },
      { section: "gaseosas-cervezas", name: "Cola 3L", price: 4.00, desc: "Botella de cola 3L.", withSides: false },
      { section: "gaseosas-cervezas", name: "Fuze Tea 1L", price: 1.75, desc: "Té helado Fuze Tea 1L.", withSides: false },
      { section: "gaseosas-cervezas", name: "Malta pequeña", price: 0.75, desc: "Malta personal.", withSides: false },
      { section: "gaseosas-cervezas", name: "Malta 1L", price: 1.00, desc: "Malta 1L.", withSides: false },
      { section: "gaseosas-cervezas", name: "Agua personal", price: 0.75, desc: "Agua embotellada.", withSides: false },
      { section: "gaseosas-cervezas", name: "Cerveza Club 550cc", price: 2.75, desc: "Cerveza Club 550cc.", withSides: false },
      { section: "gaseosas-cervezas", name: "Cerveza Corona 330cc", price: 2.50, desc: "Cerveza Corona 330cc.", withSides: false },
      { section: "gaseosas-cervezas", name: "Michelada limón (Light)", price: 3.50, desc: "Michelada de cerveza light con limón.", withSides: false },
      { section: "gaseosas-cervezas", name: "Michelada limón (Club)", price: 4.00, desc: "Michelada de cerveza Club con limón.", withSides: false },
      { section: "gaseosas-cervezas", name: "Michelada maracuyá (Light)", price: 3.50, desc: "Michelada de cerveza light con maracuyá.", withSides: false },
      { section: "gaseosas-cervezas", name: "Michelada maracuyá (Club)", price: 4.00, desc: "Michelada de cerveza Club con maracuyá.", withSides: false },
      { section: "gaseosas-cervezas", name: "Michelada maracumango (Light)", price: 3.50, desc: "Michelada de cerveza light con maracuyá y mango.", withSides: false },
      { section: "gaseosas-cervezas", name: "Michelada maracumango (Club)", price: 4.00, desc: "Michelada de cerveza Club con maracuyá y mango.", withSides: false },

      // JUGOS NATURALES (jarras)
      { section: "jugos-naturales", name: "Limonada pequeña", price: 3.00, desc: "Jarra pequeña de limonada.", withSides: false },
      { section: "jugos-naturales", name: "Limonada grande", price: 4.00, desc: "Jarra grande de limonada.", withSides: false },
      { section: "jugos-naturales", name: "Limonada extra", price: 6.00, desc: "Jarra extra grande de limonada.", withSides: false },
      { section: "jugos-naturales", name: "Limonada rosa pequeña", price: 3.00, desc: "Jarra pequeña de limonada rosa.", withSides: false },
      { section: "jugos-naturales", name: "Limonada rosa grande", price: 4.00, desc: "Jarra grande de limonada rosa.", withSides: false },
      { section: "jugos-naturales", name: "Limonada rosa extra", price: 6.00, desc: "Jarra extra de limonada rosa.", withSides: false },
      { section: "jugos-naturales", name: "Jamaica pequeña (sin azúcar)", price: 3.00, desc: "Jarra pequeña de jamaica sin azúcar.", withSides: false },
      { section: "jugos-naturales", name: "Jamaica grande (sin azúcar)", price: 4.00, desc: "Jarra grande de jamaica sin azúcar.", withSides: false },
      { section: "jugos-naturales", name: "Jamaica extra (sin azúcar)", price: 6.00, desc: "Jarra extra de jamaica sin azúcar.", withSides: false },
      { section: "jugos-naturales", name: "Jugo de fresa pequeño", price: 3.00, desc: "Jarra pequeña de jugo de fresa.", withSides: false },
      { section: "jugos-naturales", name: "Jugo de fresa grande", price: 4.00, desc: "Jarra grande de jugo de fresa.", withSides: false },
      { section: "jugos-naturales", name: "Jugo de fresa extra", price: 6.00, desc: "Jarra extra de jugo de fresa.", withSides: false },
      { section: "jugos-naturales", name: "Jugo de maracuyá pequeño", price: 3.00, desc: "Jarra pequeña de jugo de maracuyá.", withSides: false },
      { section: "jugos-naturales", name: "Jugo de maracuyá grande", price: 4.00, desc: "Jarra grande de jugo de maracuyá.", withSides: false },
      { section: "jugos-naturales", name: "Jugo de maracuyá extra", price: 6.00, desc: "Jarra extra de jugo de maracuyá.", withSides: false },

      // COSTILLAS TEXAS FIN DE SEMANA
      {
        section: "costillas-texas",
        name: "Costilla ahumada americana texana",
        price: 12.00,
        desc: "Costilla ahumada estilo Texas, chorizo, BBQ especial, piña caramelizada, papas, ensalada, chimichurri y salsa.",
        withSides: true
      },
      {
        section: "costillas-texas",
        name: "Costilla ahumada americana texana + moro",
        price: 14.00,
        desc: "Costilla ahumada estilo Texas con arroz moro, chorizo, papas, piña caramelizada, ensalada, chimichurri y salsa.",
        withSides: true
      }
    ];

    function buildTabs() {
      const tabsContainer = document.getElementById("menu-tabs");
      tabs.forEach(tab => {
        const btn = document.createElement("button");
        btn.className =
          "whitespace-nowrap rounded-full border px-4 py-2 text-xs font-semibold tracking-wide bg-black/40 border-slate-700 text-slate-200 hover:bg-amber-700/40 transition";
        btn.textContent = tab.label;
        btn.dataset.tabId = tab.id;
        btn.addEventListener("click", () => setActiveTab(tab.id));
        tabsContainer.appendChild(btn);
      });
    }

    function createCard(item, sectionConfig) {
      const article = document.createElement("article");
      article.className = "bg-madera/90 border border-amber-900/50 rounded-2xl overflow-hidden shadow-xl shadow-black/50 flex flex-col";
      article.setAttribute("data-name", item.name);
      article.setAttribute("data-price", item.price.toString());

      const puntoHtml = item.withPunto ? `
        <div>
          <label class="block text-xs text-slate-300 mb-1 font-medium">Punto de cocción (opcional)</label>
          <select class="w-full text-xs bg-carb border border-slate-700 rounded-lg px-2 py-2 focus:outline-none focus:ring focus:ring-amber-500/50 punto-select">
            <option value="">Sin preferencia</option>
            <option value="3/4">3/4 (jugoso)</option>
            <option value="Al punto">Al punto</option>
            <option value="Bien cocido">Bien cocido</option>
          </select>
        </div>
      ` : "";

      const sidesHtml = item.withSides ? `
        <div>
          <label class="block text-xs text-slate-300 mb-1 font-medium">Guarnición</label>
          <select class="w-full text-xs bg-carb border border-slate-700 rounded-lg px-2 py-2 focus:outline-none focus:ring focus:ring-amber-500/50 guarnicion-select">
            <option value="">Selecciona una guarnición</option>
            <option value="Papas fritas">Papas fritas</option>
            <option value="Papa salteada">Papa salteada</option>
            <option value="Patacones">Patacones</option>
          </select>
        </div>
        <div>
          <label class="block text-xs text-slate-300 mb-1 font-medium">Ensalada</label>
          <select class="w-full text-xs bg-carb border border-slate-700 rounded-lg px-2 py-2 focus:outline-none focus:ring focus:ring-amber-500/50 ensalada-select">
            <option value="">Selecciona una ensalada</option>
            <option value="Ensalada de la casa">Ensalada de la casa</option>
            <option value="Ensalada mixta">Ensalada mixta</option>
          </select>
        </div>
      ` : "";

      article.innerHTML = `
        <div class="h-40 w-full overflow-hidden">
          <img
            src="${sectionConfig.image}"
            alt="${item.name}"
            class="w-full h-full object-cover hover:scale-105 transition-transform duration-500" />
        </div>
        <div class="p-4 flex flex-col gap-3">
          <div>
            <h3 class="font-steak text-xl mb-1">${item.name}</h3>
            <p class="text-xs text-slate-300">
              ${item.desc || ""}
            </p>
          </div>
          <p class="text-amber-300 font-semibold text-lg">$${item.price.toFixed(2)}</p>
          ${puntoHtml}
          ${sidesHtml}
          <button
            class="mt-2 inline-flex justify-center items-center gap-1 rounded-full bg-amber-600 hover:bg-amber-500 px-4 py-2 text-xs font-semibold uppercase tracking-wide transition add-to-cart">
            Agregar al carrito
          </button>
        </div>
      `;

      return article;
    }

    function generateMenuSections() {
      const container = document.getElementById("menu-sections");
      menuSections.forEach(section => {
        const sectionEl = document.createElement("section");
        sectionEl.className = "mb-10";
        sectionEl.dataset.sectionId = section.id;
        sectionEl.dataset.tab = sectionToTab[section.id] || "carnes";

        const header = document.createElement("div");
        header.className = "mb-4";
        header.innerHTML = `
          <h2 class="font-steak text-2xl md:text-3xl mb-1">${section.title}</h2>
          <p class="text-slate-300 text-sm md:text-base max-w-2xl">${section.description}</p>
        `;
        sectionEl.appendChild(header);

        const grid = document.createElement("div");
        grid.className = "grid gap-6 md:grid-cols-2 xl:grid-cols-3";

        const itemsInSection = menuItems.filter(i => i.section === section.id);
        itemsInSection.forEach(item => {
          const card = createCard(item, section);
          grid.appendChild(card);
        });

        sectionEl.appendChild(grid);
        container.appendChild(sectionEl);
      });
    }

    function setActiveTab(tabId) {
      const tabsContainer = document.getElementById("menu-tabs");
      tabsContainer.querySelectorAll("button").forEach(btn => {
        if (btn.dataset.tabId === tabId) {
          btn.classList.add("bg-amber-500", "text-black", "border-amber-300");
          btn.classList.remove("bg-black/40", "text-slate-200", "border-slate-700");
        } else {
          btn.classList.remove("bg-amber-500", "text-black", "border-amber-300");
          btn.classList.add("bg-black/40", "text-slate-200", "border-slate-700");
        }
      });

      document.querySelectorAll("#menu-sections section").forEach(sec => {
        if (sec.dataset.tab === tabId) {
          sec.classList.remove("hidden");
        } else {
          sec.classList.add("hidden");
        }
      });
    }

    buildTabs();
    generateMenuSections();

    function openCart() {
      cartPanel.classList.remove("translate-x-full");
      cartOverlay.classList.remove("pointer-events-none");
      cartOverlay.classList.add("opacity-100");
    }

    function closeCart() {
      cartPanel.classList.add("translate-x-full");
      cartOverlay.classList.add("pointer-events-none");
      cartOverlay.classList.remove("opacity-100");
    }

    cartToggleBtn.addEventListener("click", openCart);
    cartCloseBtn.addEventListener("click", closeCart);
    cartOverlay.addEventListener("click", closeCart);

    function renderCart() {
      cartItemsContainer.innerHTML = "";
      let total = 0;

      if (cart.length === 0) {
        cartItemsContainer.innerHTML =
          '<p class="text-xs text-slate-400">Todavía no has agregado productos. Elige algo del menú y agrégalo al carrito.</p>';
      } else {
        cart.forEach((item, index) => {
          total += item.price;
          const div = document.createElement("div");
          div.className = "border border-slate-800/80 rounded-xl px-3 py-2 text-xs flex flex-col gap-1 bg-black/40";

          const titulo = document.createElement("div");
          titulo.className = "flex justify-between items-center gap-2";
          titulo.innerHTML = `
            <span class="font-semibold text-slate-100">${item.name}</span>
            <span class="text-amber-300 font-semibold">$${item.price.toFixed(2)}</span>
          `;

          const detalle = document.createElement("p");
          detalle.className = "text-[11px] text-slate-300 leading-snug";

          let text = "";
          if (item.punto) text += `Punto: ${item.punto}. `;
          if (item.guarnicion) text += `Guarnición: ${item.guarnicion}. `;
          if (item.ensalada) text += `Ensalada: ${item.ensalada}. `;
          if (!text) text = "Sin opciones adicionales seleccionadas.";
          detalle.textContent = text;

          const acciones = document.createElement("div");
          acciones.className = "flex justify-between items-center mt-1";

          const cantidad = document.createElement("span");
          cantidad.className = "text-[11px] text-slate-400";
          cantidad.textContent = `Cantidad: ${item.cantidad}`;

          const btnEliminar = document.createElement("button");
          btnEliminar.className =
            "text-[11px] text-red-300 hover:text-red-200 underline underline-offset-2";
          btnEliminar.textContent = "Eliminar";
          btnEliminar.addEventListener("click", () => {
            cart.splice(index, 1);
            renderCart();
          });

          acciones.appendChild(cantidad);
          acciones.appendChild(btnEliminar);

          div.appendChild(titulo);
          div.appendChild(detalle);
          div.appendChild(acciones);

          cartItemsContainer.appendChild(div);
        });
      }

      cartTotalEl.textContent = `$${total.toFixed(2)}`;
      cartCountEl.textContent = cart.length;
    }

    function addItemFromCard(cardEl) {
      const name = cardEl.getAttribute("data-name");
      const price = parseFloat(cardEl.getAttribute("data-price"));

      const puntoSelect = cardEl.querySelector(".punto-select");
      const guarnicionSelect = cardEl.querySelector(".guarnicion-select");
      const ensaladaSelect = cardEl.querySelector(".ensalada-select");

      const punto = puntoSelect ? puntoSelect.value : "";
      const guarnicion = guarnicionSelect ? guarnicionSelect.value : "";
      const ensalada = ensaladaSelect ? ensaladaSelect.value : "";

      const requiresSides = !!(guarnicionSelect || ensaladaSelect);

      if (requiresSides && (!guarnicion || !ensalada)) {
        alert("Por favor, selecciona la guarnición y la ensalada antes de agregar este plato.");
        return;
      }

      const item = {
        name,
        price,
        punto,
        guarnicion,
        ensalada,
        cantidad: 1
      };

      cart.push(item);
      renderCart();
      openCart();
    }

    function bindAddToCartButtons() {
      document.querySelectorAll(".add-to-cart").forEach((btn) => {
        btn.addEventListener("click", () => {
          const card = btn.closest("article[data-name]");
          if (card) addItemFromCard(card);
        });
      });
    }

    bindAddToCartButtons();
    setActiveTab("carnes");
    renderCart();

    // WhatsApp
    whatsappBtn.addEventListener("click", () => {
      if (cart.length === 0) {
        alert("Tu carrito está vacío. Agrega al menos un producto antes de confirmar el pedido.");
        return;
      }

      const nombreCliente = document.getElementById("cliente-nombre").value.trim();
      const detalleCliente = document.getElementById("cliente-detalle").value.trim();

      if (!nombreCliente) {
        alert("Por favor, ingresa tu nombre.");
        return;
      }

      if (!detalleCliente) {
        alert("Por favor, indica tu número de mesa o dirección de entrega.");
        return;
      }

      const servicioRadio = document.querySelector('input[name="servicio"]:checked');
      const servicio = servicioRadio ? servicioRadio.value : "mesa";
      const servicioTexto =
        servicio === "mesa" ? "PARA SERVIRSE EN LA MESA" : "PARA LLEVAR / DOMICILIO";

      const pagoRadio = document.querySelector('input[name="pago"]:checked');
      if (!pagoRadio) {
        alert("Por favor, selecciona la forma de pago.");
        return;
      }
      const pagoTexto =
        pagoRadio.value === "transferencia" ? "Transferencia bancaria" : "Efectivo";

      const facturaNombre = document.getElementById("factura-nombre").value.trim();
      const facturaId = document.getElementById("factura-id").value.trim();
      const facturaEmail = document.getElementById("factura-email").value.trim();

      let total = 0;
      let detalle = cart
        .map((item, index) => {
          total += item.price;
          let extras = "";
          if (item.punto) extras += ` (${item.punto})`;
          if (item.guarnicion) extras += ` - Guarnición: ${item.guarnicion}`;
          if (item.ensalada) extras += ` - Ensalada: ${item.ensalada}`;
          return `${index + 1}) ${item.name}${extras} - $${item.price.toFixed(2)}`;
        })
        .join("\n");

      let mensaje = `Hola, quiero hacer un pedido en *Leña y Carbón* (${servicioTexto}):\n\n`;

      mensaje += `*Datos del cliente:*\n`;
      mensaje += `Nombre: ${nombreCliente}\n`;
      mensaje += `Mesa / Dirección: ${detalleCliente}\n`;
      mensaje += `Forma de pago: ${pagoTexto}\n\n`;

      if (facturaNombre || facturaId || facturaEmail) {
        mensaje += `*Datos para factura:*\n`;
        if (facturaNombre) mensaje += `Nombre/Razón social: ${facturaNombre}\n`;
        if (facturaId) mensaje += `Cédula/RUC: ${facturaId}\n`;
        if (facturaEmail) mensaje += `Correo: ${facturaEmail}\n`;
        mensaje += `\n`;
      }

      mensaje += `*Detalle del pedido:*\n${detalle}\n\n`;
      mensaje += `Total aproximado: $${total.toFixed(2)}\n\n`;
      mensaje += `¿Me confirmas tiempo de preparación y forma de entrega?`;

      const encodedMessage = encodeURIComponent(mensaje);

      const phone = "593939065989";

      const url = `https://wa.me/${phone}?text=${encodedMessage}`;
      window.open(url, "_blank");
    });

    // JUEGO ROMPEBLOQUES
    (function initBreakoutGame() {
      const canvas = document.getElementById("breakout");
      if (!canvas) return;
      const ctx = canvas.getContext("2d");

      let x, y, dx, dy;
      let ballRadius = 7;
      let paddleHeight = 10;
      let paddleWidth = 75;
      let paddleX;
      let rightPressed = false;
      let leftPressed = false;
      let brickRowCount = 3;
      let brickColumnCount = 6;
      let brickWidth = 60;
      let brickHeight = 16;
      let brickPadding = 8;
      let brickOffsetTop = 30;
      let brickOffsetLeft = 40;
      let bricks = [];
      let gameInterval = null;

      function setupBricks() {
        bricks = [];
        for (let c = 0; c < brickColumnCount; c++) {
          bricks[c] = [];
          for (let r = 0; r < brickRowCount; r++) {
            bricks[c][r] = { x: 0, y: 0, status: 1 };
          }
        }
      }

      function resetBallAndPaddle() {
        x = canvas.width / 2;
        y = canvas.height - 30;
        dx = 2;
        dy = -2;
        paddleX = (canvas.width - paddleWidth) / 2;
      }

      function initGame() {
        resetBallAndPaddle();
        setupBricks();
        if (gameInterval) clearInterval(gameInterval);
        gameInterval = setInterval(draw, 16);
      }

      function drawBall() {
        ctx.beginPath();
        ctx.arc(x, y, ballRadius, 0, Math.PI * 2);
        ctx.fillStyle = "#fbbf24";
        ctx.fill();
        ctx.closePath();
      }

      function drawPaddle() {
        ctx.beginPath();
        ctx.roundRect(paddleX, canvas.height - paddleHeight - 5, paddleWidth, paddleHeight, 4);
        ctx.fillStyle = "#ef4444";
        ctx.fill();
        ctx.closePath();
      }

      function drawBricks() {
        for (let c = 0; c < brickColumnCount; c++) {
          for (let r = 0; r < brickRowCount; r++) {
            if (bricks[c][r].status === 1) {
              const brickX = (c * (brickWidth + brickPadding)) + brickOffsetLeft;
              const brickY = (r * (brickHeight + brickPadding)) + brickOffsetTop;
              bricks[c][r].x = brickX;
              bricks[c][r].y = brickY;

              ctx.beginPath();
              ctx.roundRect(brickX, brickY, brickWidth, brickHeight, 4);
              const gradient = ctx.createLinearGradient(brickX, brickY, brickX + brickWidth, brickY + brickHeight);
              gradient.addColorStop(0, "#f97316");
              gradient.addColorStop(1, "#b91c1c");
              ctx.fillStyle = gradient;
              ctx.fill();
              ctx.closePath();
            }
          }
        }
      }

      function collisionDetection() {
        for (let c = 0; c < brickColumnCount; c++) {
          for (let r = 0; r < brickRowCount; r++) {
            const b = bricks[c][r];
            if (b.status === 1) {
              if (
                x > b.x &&
                x < b.x + brickWidth &&
                y > b.y &&
                y < b.y + brickHeight
              ) {
                dy = -dy;
                b.status = 0;
              }
            }
          }
        }
      }

      function draw() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);

        drawBricks();
        drawBall();
        drawPaddle();
        collisionDetection();

        // Rebotes laterales
        if (x + dx > canvas.width - ballRadius || x + dx < ballRadius) {
          dx = -dx;
        }
        // Rebote techo
        if (y + dy < ballRadius) {
          dy = -dy;
        } else if (y + dy > canvas.height - ballRadius - paddleHeight - 5) {
          // Zona de la paleta
          if (x > paddleX && x < paddleX + paddleWidth) {
            dy = -dy;
          } else if (y + dy > canvas.height - ballRadius) {
            // Se cayó: reinicia
            initGame();
            return;
          }
        }

        if (rightPressed && paddleX < canvas.width - paddleWidth) {
          paddleX += 5;
        } else if (leftPressed && paddleX > 0) {
          paddleX -= 5;
        }

        x += dx;
        y += dy;
      }

      function keyDownHandler(e) {
        if (e.key === "ArrowRight" || e.key === "Right") {
          rightPressed = true;
        } else if (e.key === "ArrowLeft" || e.key === "Left") {
          leftPressed = true;
        }
      }

      function keyUpHandler(e) {
        if (e.key === "ArrowRight" || e.key === "Right") {
          rightPressed = false;
        } else if (e.key === "ArrowLeft" || e.key === "Left") {
          leftPressed = false;
        }
      }

      document.addEventListener("keydown", keyDownHandler);
      document.addEventListener("keyup", keyUpHandler);

      const btnLeft = document.getElementById("btn-left");
      const btnRight = document.getElementById("btn-right");
      const btnRestart = document.getElementById("btn-restart");

      function handlePress(direction, pressed) {
        if (direction === "left") {
          leftPressed = pressed;
        } else if (direction === "right") {
          rightPressed = pressed;
        }
      }

      ["mousedown", "touchstart"].forEach(evt =>
        btnLeft.addEventListener(evt, (e) => {
          e.preventDefault();
          handlePress("left", true);
        })
      );
      ["mouseup", "mouseleave", "touchend"].forEach(evt =>
        btnLeft.addEventListener(evt, (e) => {
          e.preventDefault();
          handlePress("left", false);
        })
      );

      ["mousedown", "touchstart"].forEach(evt =>
        btnRight.addEventListener(evt, (e) => {
          e.preventDefault();
          handlePress("right", true);
        })
      );
      ["mouseup", "mouseleave", "touchend"].forEach(evt =>
        btnRight.addEventListener(evt, (e) => {
          e.preventDefault();
          handlePress("right", false);
        })
      );

      btnRestart.addEventListener("click", () => {
        initGame();
      });

      initGame();
    })();
  </script>
</body>
</html>
